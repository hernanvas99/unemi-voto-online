import{d as w,r as f,A as z,_ as k,o as c,S as u,g as r,f as a,as as h,e as t,Q as I,h as _,at as N,W as C,c as q,au as E,av as V,aw as B,ax as Q,U as y,T as j,X as O,i as D}from"./index.86c036ad.js";import{Q as x}from"./QBadge.265b8235.js";import{Q as $,a as T}from"./QTable.29ed5419.js";import{Q as R}from"./QPage.4cf48411.js";import{A as P}from"./Api.0193aa3b.js";import{Q as S}from"./QForm.dbcce163.js";import{u as A}from"./useHelpers.4fa72bec.js";import{u as F}from"./useRolPermisos.1ee2517c.js";import"./QList.aebb5a08.js";import"./QSelect.ff69d042.js";import"./QItem.faa27fdc.js";import"./rtl.b51694b1.js";import"./use-fullscreen.7000f2af.js";import"./index.2cf0d985.js";import"./auth-user.43655eae.js";const M=w({name:"AgregarPeriodo",setup(e,{emit:s}){const l=f(""),n=f(!1),{mostrarNotify:m}=A(),d=async()=>{try{n.value=!0;const{data:i}=await P.post("/periodos",{nombre:l.value});s("actualizarLista"),m("positive",i.msg,"top-right"),n.value=!1}catch(i){alert(i)}};return z(l,(i,p)=>{l.value=i.toUpperCase()}),{nombre:l,loading:n,submit:d}}}),G=t("div",{class:"text-h6"},"Agregar Periodo",-1),H={class:"row q-gutter-sm justify-around"},W={class:"col-xs-12 col-sm-9"},X=t("label",null,"Nombre del Periodo:",-1),J={class:"col-xs-9 col-sm-12 flex justify-center q-my-md"};function K(e,s,l,n,m,d){return c(),u(N,{style:{width:"500px","max-width":"80vw"}},{default:r(()=>[a(h,null,{default:r(()=>[G]),_:1}),a(h,{class:"q-pt-none"},{default:r(()=>[a(S,{onSubmit:e.submit},{default:r(()=>[t("div",H,[t("div",W,[X,a(I,{modelValue:e.nombre,"onUpdate:modelValue":s[0]||(s[0]=i=>e.nombre=i),modelModifiers:{trim:!0},"input-class":"text-center",dense:"",filled:"",required:""},null,8,["modelValue"])]),t("div",J,[a(_,{label:"Guardar",class:"q-px-xl",loading:e.loading,type:"submit",color:"green-9"},null,8,["loading"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var Y=k(M,[["render",K]]);const Z=w({name:"EditarEspecialidad",props:["periodoData"],setup(e,{emit:s}){const l=f(!1);let{id:n,nombre:m}=e.periodoData;const d=f(m),{mostrarNotify:i}=A(),p=async()=>{try{l.value=!0;const{data:o}=await P.put("/periodos",{nombre:d.value,id:n});s("actualizarLista"),i("positive",o.msg,"top-right"),l.value=!1}catch(o){alert(o)}};return z(d,(o,g)=>{d.value=o.toUpperCase()}),{nombre:d,loading:l,submit:p}}}),ee=t("div",{class:"text-h6"},"Editar Periodo",-1),oe={class:"row q-gutter-sm justify-around"},ae={class:"col-xs-12 col-sm-9"},se=t("label",null,"Nombre del Periodo:",-1),te={class:"col-xs-9 col-sm-12 flex justify-center q-my-md"};function re(e,s,l,n,m,d){return c(),u(N,{style:{width:"500px","max-width":"80vw"}},{default:r(()=>[a(h,null,{default:r(()=>[ee]),_:1}),a(h,{class:"q-pt-none"},{default:r(()=>[a(S,{onSubmit:e.submit},{default:r(()=>[t("div",oe,[t("div",ae,[se,a(I,{modelValue:e.nombre,"onUpdate:modelValue":s[0]||(s[0]=i=>e.nombre=i),modelModifiers:{trim:!0},"input-class":"text-center",dense:"",filled:"",required:""},null,8,["modelValue"])]),t("div",te,[a(_,{label:"Editar",class:"q-px-xl",loading:e.loading,type:"submit",color:"green-9"},null,8,["loading"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var le=k(Z,[["render",re]]);const ie=[{name:"id",label:"#",align:"left",field:"id",sortable:!0},{name:"periodo",label:"PERIODOS",align:"left",field:"nombre",sortable:!0},{name:"estado",label:"ESTADOS",align:"left",field:"estado",sortable:!0},{name:"acciones",label:"ACCIONES",align:"center"}],de=w({name:"IndexEspecialidad",components:{Add:Y,Edit:le},setup(){const e=f([]),s=f(!1),l=f(!1),{mostrarNotify:n}=A(),m=f({}),d=f(!1),{validarPermisos:i}=F(),p=async()=>{s.value=!1,l.value=!1,d.value=!0;try{const{data:{periodos:v}}=await P.get("/periodos/all");e.value=v}catch(v){alert(v)}d.value=!1},o=v=>{m.value=v,l.value=!0},g=async(v,b)=>{try{await P.delete(`/periodos/${v}/${b}`),n("positive",`Periodo ${b?"Activado":"Inactivado"} exitosamente`),p()}catch(L){alert(L)}},U=async v=>{B.create({title:"\xBFDeseas Eliminar este periodo?",message:"Una vez eliminado no podra recuperarse...!",ok:{push:!0,label:"Eliminar",color:"teal-7"},cancel:{push:!0,color:"blue-grey-8",label:"Cancelar"}}).onOk(async()=>{Q.show({message:"Cargando..."});try{const{data:b}=await P.delete(`/periodos/${v}`);n("positive",b.msg,"top-right"),p()}catch(b){n("negative",b.response.data.message)}Q.hide()})};return p(),{activarDesactivarPeriodo:g,columns:ie,editarPeriodo:o,eliminarPeriodo:U,modalAgregarPeriodos:s,loading:d,modalEditarPeriodo:l,getPeriodos:p,periodoData:m,rows:e,validarPermisos:i}}}),ne={class:"row q-py-lg q-pl-md"},ce=t("div",{class:"col-md-6"},[t("label",{class:"text-h6"},"Registros de Periodos Lectivos")],-1),ue={class:"col-md-6 flex justify-end"},me={class:"row"},pe={class:"col-md-12 col-xs-12"},ve={class:"q-pa-md"},fe={class:"full-width row flex-center text-lime-10 q-gutter-sm"},ge=t("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1);function _e(e,s,l,n,m,d){const i=C("Add"),p=C("Edit");return c(),q(V,null,[a(R,null,{default:r(()=>[t("div",ne,[ce,t("div",ue,[e.validarPermisos("Agregar Periodo")?(c(),u(_,{key:0,class:"q-mr-md",color:"secondary","icon-right":"add_circle",label:"nuevo",onClick:s[0]||(s[0]=o=>e.modalAgregarPeriodos=!0)})):y("",!0)])]),t("div",me,[t("div",pe,[t("div",ve,[e.validarPermisos("Ver Periodos")?(c(),u(T,{key:0,class:"my-sticky-header-table",rows:e.rows,loading:e.loading,columns:e.columns,"row-key":"name"},{"body-cell-estado":r(o=>[a($,{props:o},{default:r(()=>[o.value?(c(),u(x,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(c(),u(x,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":r(o=>[a($,{props:o},{default:r(()=>[e.validarPermisos("Editar Periodo")?(c(),u(_,{key:0,round:"",color:"primary",onClick:g=>e.editarPeriodo(o.row),icon:"edit",class:"q-mr-sm",size:"11px"},null,8,["onClick"])):y("",!0),o.row.estado&&e.validarPermisos("Inactivar Periodo")?(c(),u(_,{key:1,round:"",color:"blue-grey",icon:"close",onClick:g=>e.activarDesactivarPeriodo(o.row.id,!1),size:"11px"},null,8,["onClick"])):(c(),q(V,{key:2},[!o.row.estado&&e.validarPermisos("Activar Periodo")?(c(),u(_,{key:0,round:"",color:"positive",class:"q-mr-sm",icon:"done",onClick:g=>e.activarDesactivarPeriodo(o.row.id,!0),size:"11px"},null,8,["onClick"])):y("",!0),!o.row.estado&&e.validarPermisos("Eliminar Periodo")?(c(),u(_,{key:1,round:"",color:"deep-orange",icon:"delete",onClick:g=>e.eliminarPeriodo(o.row.id),size:"11px"},null,8,["onClick"])):y("",!0)],64))]),_:2},1032,["props"])]),"body-cell-id":r(o=>[a($,{props:o},{default:r(()=>[j(O(o.pageIndex+1),1)]),_:2},1032,["props"])]),"no-data":r(({icon:o,filter:g})=>[t("div",fe,[a(D,{size:"2em",name:"sentiment_dissatisfied"}),ge,a(D,{size:"2em",name:g?"filter_b_and_w":o},null,8,["name"])])]),_:1},8,["rows","loading","columns"])):y("",!0)])])])]),_:1}),a(E,{modelValue:e.modalAgregarPeriodos,"onUpdate:modelValue":s[1]||(s[1]=o=>e.modalAgregarPeriodos=o)},{default:r(()=>[a(i,{onActualizarLista:e.getPeriodos},null,8,["onActualizarLista"])]),_:1},8,["modelValue"]),a(E,{modelValue:e.modalEditarPeriodo,"onUpdate:modelValue":s[2]||(s[2]=o=>e.modalEditarPeriodo=o)},{default:r(()=>[a(p,{onActualizarLista:e.getPeriodos,periodoData:e.periodoData},null,8,["onActualizarLista","periodoData"])]),_:1},8,["modelValue"])],64)}var ze=k(de,[["render",_e]]);export{ze as default};
