import{Q as m}from"./QSelect.cd845e3e.js";import{_ as k,d as R,r as i,o as v,S as _,g as h,e as a,f as p,bh as B,w as C,i as Q,U as g,h as U,c as A}from"./index.2c7c5b43.js";import{Q as I}from"./QPage.152e8f99.js";import{u as S}from"./useHelpers.e401e0ad.js";import{A as f}from"./Api.b16e05d9.js";import"./QItem.3a1f1059.js";import"./rtl.b51694b1.js";import"./index.2cf0d985.js";const $=R({name:"IndexInforme",setup(){const e=i([]),t=i([]),r=i(""),d=i(""),n=i(""),c=i(null),s=i(!1),{mostrarNotify:y}=S(),w=async()=>{try{const{data:{aperturas:o}}=await f.get("/aperturas/all");o.forEach(l=>{l.estado&&(r.value=l.id),e.value.push({label:l.descripcion,value:l.id})})}catch(o){alert(o)}},b=async()=>{try{if(n.value=="")return y("warning","Elige el tipo de reporte","top-right");s.value=!0;const u=e.value.find(V=>V.value==r.value),{data:E}=await f.post("/reportes",{apertura_id:r.value,tipo_reporte:n.value,especialidad_id:d.value==""?null:d.value,eleccion:u.label},{responseType:"blob"});var o=new Blob([E],{type:"application/pdf"}),l=URL.createObjectURL(o);c.value=l,s.value=!1}catch(u){s.value=!1,alert(u)}},q=async()=>{try{const{data:{especialidades:o}}=await f.get("/especialidades/activos");t.value=[],o.forEach(l=>{t.value.push({label:l.nombre,value:l.id})})}catch(o){alert(o)}};return w(),q(),{apertura_id:r,arrayAperturas:e,especialidad_id:d,getReporte:b,loading:s,listEspecialidades:t,tipo_selected:n,tipo_reporte:["Resultado","Estudiantes que votaron","Estudiantes que no votaron"],url_pdf:c}}}),N=a("div",{class:"row q-py-sm q-pl-md"},[a("div",{class:"col-md-12 text-center"},[a("label",{class:"text-h6"},"REPORTES")])],-1),P={class:"row"},T={class:"col-md-12"},L={class:"row q-mt-sm"},O={class:"col-xs-11 col-sm-11 flex q-pl-lg"},j=a("label",{class:"text-subtitle1 text-weight-medium q-pr-xl"}," Filtrar Por: ",-1),F={class:"col-xs-1 col-sm-1 text-center"},H={key:0,class:"row q-mt-md"},M={class:"col-md-10 offset-1"},z=["src"];function D(e,t,r,d,n,c){return v(),_(I,null,{default:h(()=>[N,a("div",P,[a("div",T,[a("div",L,[a("div",O,[j,p(m,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.apertura_id,"onUpdate:modelValue":t[0]||(t[0]=s=>e.apertura_id=s),options:e.arrayAperturas,style:{width:"20%"},label:"elecciones",class:"q-mr-lg"},null,8,["modelValue","options"]),p(m,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.tipo_selected,"onUpdate:modelValue":t[1]||(t[1]=s=>e.tipo_selected=s),options:e.tipo_reporte,style:{width:"23%"},label:"Tipo de reporte",class:"q-mr-lg"},null,8,["modelValue","options"]),e.tipo_selected=="Estudiantes que no votaron"||e.tipo_selected=="Estudiantes que votaron"?(v(),_(m,{key:0,label:"Por especialidad",filled:"",required:"",dense:"","emit-value":"","map-options":"",style:{width:"30%"},modelValue:e.especialidad_id,"onUpdate:modelValue":t[3]||(t[3]=s=>e.especialidad_id=s),options:e.listEspecialidades},B({_:2},[e.especialidad_id?{name:"append",fn:h(()=>[p(Q,{name:"cancel",onClick:t[2]||(t[2]=C(s=>e.especialidad_id=null,["stop","prevent"])),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","options"])):g("",!0)]),a("div",F,[p(U,{color:"secondary","icon-right":"picture_as_pdf",onClick:e.getReporte,loading:e.loading,rounded:""},null,8,["onClick","loading"])])])])]),e.url_pdf!=null?(v(),A("div",H,[a("div",M,[a("iframe",{src:e.url_pdf,width:"100%",height:"550px"},`
      `,8,z)])])):g("",!0)]),_:1})}var ee=k($,[["render",D]]);export{ee as default};
