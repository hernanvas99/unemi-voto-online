import{x as h,l as fa,aZ as Sa,n as xa,s as Ha,b7 as Oa,r as O,aF as Ka,A as oe,F as s,am as Oe,H as Ea,J as ha,b8 as Ia,C as va,h as F,ar as Ra,au as ma,ah as Wa,b5 as Ga,E as we,aa as Xa,b9 as Za,ba as et,al as at,d as _a,_ as ya,o as le,S as se,g,f as v,as as ta,e as y,Q as X,i as de,at as ja,W as wa,c as ka,av as Aa,aw as tt,U as ea,T as Va,X as Ca}from"./index.2c7c5b43.js";import{Q as lt}from"./QSpace.9c94e2bb.js";import{a as ot,Q as aa}from"./QTable.200aae8f.js";import{Q as qa}from"./QBadge.d2a8fc0c.js";import{Q as nt}from"./QPage.152e8f99.js";import{A as ke}from"./Api.b16e05d9.js";import{b as rt,d as it,e as ut,Q as Fa}from"./QSelect.cd845e3e.js";import{t as st,a as Da,f as Pa,g as dt,j as da,_ as Le,u as ct}from"./date.4260926c.js";import{p as Z}from"./QItem.3a1f1059.js";import{T as vt}from"./TouchPan.63a5e114.js";import{Q as Ta}from"./QForm.8d724ed1.js";import{u as ga}from"./useHelpers.e401e0ad.js";import{u as mt}from"./useRolPermisos.72458214.js";import"./QList.f8aa654c.js";import"./use-fullscreen.36e0f58f.js";import"./index.2cf0d985.js";import"./rtl.b51694b1.js";import"./touch.70a9dd44.js";import"./auth-user.3faec0ee.js";const ft=["gregorian","persian"],Ya={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>ft.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Ua=["update:modelValue"];function ue(e){return e.year+"/"+Z(e.month)+"/"+Z(e.day)}function Na(e,i){const w=h(()=>e.disable!==!0&&e.readonly!==!0),M=h(()=>e.editable===!0?0:-1),A=h(()=>{const q=[];return e.color!==void 0&&q.push(`bg-${e.color}`),e.textColor!==void 0&&q.push(`text-${e.textColor}`),q.join(" ")});function Y(){return e.locale!==void 0?{...i.lang.date,...e.locale}:i.lang.date}function u(q){const m=new Date,E=q===!0?null:0;if(e.calendar==="persian"){const T=st(m);return{year:T.jy,month:T.jm,day:T.jd}}return{year:m.getFullYear(),month:m.getMonth()+1,day:m.getDate(),hour:E,minute:E,second:E,millisecond:E}}return{editable:w,tabindex:M,headerClass:A,getLocale:Y,getCurrentDate:u}}const be=20,ht=["Calendar","Years","Months"],Ma=e=>ht.includes(e),ca=e=>/^-?[\d]+\/[0-1]\d$/.test(e),He=" \u2014 ";function fe(e){return e.year+"/"+Z(e.month)}var La=fa({name:"QDate",props:{...Ya,...Sa,...xa,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ca},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ca},navigationMaxYearMonth:{type:String,validator:ca},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Ma}},emits:[...Ua,"rangeStart","rangeEnd","navigation"],setup(e,{slots:i,emit:w}){const{proxy:M}=ha(),{$q:A}=M,Y=Ha(e,A),{getCache:u}=ct(),{tabindex:q,headerClass:m,getLocale:E,getCurrentDate:T}=Na(e,A);let N;const D=Oa(e),x=Ia(D),z=O(null),$=O(Xe()),p=O(E()),ce=h(()=>Xe()),Ae=h(()=>E()),b=h(()=>T()),n=O(o($.value,p.value)),S=O(e.defaultView),Be=A.lang.rtl===!0?"right":"left",ve=O(Be.value),Q=O(Be.value),je=n.value.year,he=O(je-je%be-(je<0?be:0)),J=O(null),_e=h(()=>{const a=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${a} q-date--${a}-${e.minimal===!0?"minimal":"standard"}`+(Y.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ee=h(()=>e.color||"primary"),ae=h(()=>e.textColor||"white"),K=h(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),re=h(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),B=h(()=>re.value.filter(a=>typeof a=="string").map(a=>Ne(a,$.value,p.value)).filter(a=>a.dateHash!==null&&a.day!==null&&a.month!==null&&a.year!==null)),te=h(()=>{const a=t=>Ne(t,$.value,p.value);return re.value.filter(t=>Ka(t)===!0&&t.from!==void 0&&t.to!==void 0).map(t=>({from:a(t.from),to:a(t.to)})).filter(t=>t.from.dateHash!==null&&t.to.dateHash!==null&&t.from.dateHash<t.to.dateHash)}),Ve=h(()=>e.calendar!=="persian"?a=>new Date(a.year,a.month-1,a.day):a=>{const t=Da(a.year,a.month,a.day);return new Date(t.gy,t.gm-1,t.gd)}),Fe=h(()=>e.calendar==="persian"?ue:(a,t,l)=>Pa(new Date(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond),t===void 0?$.value:t,l===void 0?p.value:l,a.year,a.timezoneOffset)),me=h(()=>B.value.length+te.value.reduce((a,t)=>a+1+dt(Ve.value(t.to),Ve.value(t.from)),0)),ye=h(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(J.value!==null){const l=J.value.init,c=Ve.value(l);return p.value.daysShort[c.getDay()]+", "+p.value.monthsShort[l.month-1]+" "+l.day+He+"?"}if(me.value===0)return He;if(me.value>1)return`${me.value} ${p.value.pluralDay}`;const a=B.value[0],t=Ve.value(a);return isNaN(t.valueOf())===!0?He:p.value.headerTitle!==void 0?p.value.headerTitle(t,a):p.value.daysShort[t.getDay()]+", "+p.value.monthsShort[a.month-1]+" "+a.day}),ze=h(()=>B.value.concat(te.value.map(t=>t.from)).sort((t,l)=>t.year-l.year||t.month-l.month)[0]),Pe=h(()=>B.value.concat(te.value.map(t=>t.to)).sort((t,l)=>l.year-t.year||l.month-t.month)[0]),Qe=h(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(me.value===0)return He;if(me.value>1){const a=ze.value,t=Pe.value,l=p.value.monthsShort;return l[a.month-1]+(a.year!==t.year?" "+a.year+He+l[t.month-1]+" ":a.month!==t.month?He+l[t.month-1]:"")+" "+t.year}return B.value[0].year}),Ce=h(()=>{const a=[A.iconSet.datetime.arrowLeft,A.iconSet.datetime.arrowRight];return A.lang.rtl===!0?a.reverse():a}),qe=h(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):p.value.firstDayOfWeek),Te=h(()=>{const a=p.value.daysShort,t=qe.value;return t>0?a.slice(t,7).concat(a.slice(0,t)):a}),ne=h(()=>{const a=n.value;return e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():da(a.year,a.month)}),Je=h(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),U=h(()=>{if(e.navigationMinYearMonth===void 0)return null;const a=e.navigationMinYearMonth.split("/");return{year:parseInt(a[0],10),month:parseInt(a[1],10)}}),L=h(()=>{if(e.navigationMaxYearMonth===void 0)return null;const a=e.navigationMaxYearMonth.split("/");return{year:parseInt(a[0],10),month:parseInt(a[1],10)}}),Ye=h(()=>{const a={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return U.value!==null&&U.value.year>=n.value.year&&(a.year.prev=!1,U.value.year===n.value.year&&U.value.month>=n.value.month&&(a.month.prev=!1)),L.value!==null&&L.value.year<=n.value.year&&(a.year.next=!1,L.value.year===n.value.year&&L.value.month<=n.value.month&&(a.month.next=!1)),a}),De=h(()=>{const a={};return B.value.forEach(t=>{const l=fe(t);a[l]===void 0&&(a[l]=[]),a[l].push(t.day)}),a}),Ke=h(()=>{const a={};return te.value.forEach(t=>{const l=fe(t.from),c=fe(t.to);if(a[l]===void 0&&(a[l]=[]),a[l].push({from:t.from.day,to:l===c?t.to.day:void 0,range:t}),l<c){let d;const{year:H,month:f}=t.from,k=f<12?{year:H,month:f+1}:{year:H+1,month:1};for(;(d=fe(k))<=c;)a[d]===void 0&&(a[d]=[]),a[d].push({from:void 0,to:d===c?t.to.day:void 0,range:t}),k.month++,k.month>12&&(k.year++,k.month=1)}}),a}),ge=h(()=>{if(J.value===null)return;const{init:a,initHash:t,final:l,finalHash:c}=J.value,[d,H]=t<=c?[a,l]:[l,a],f=fe(d),k=fe(H);if(f!==R.value&&k!==R.value)return;const j={};return f===R.value?(j.from=d.day,j.includeFrom=!0):j.from=1,k===R.value?(j.to=H.day,j.includeTo=!0):j.to=ne.value,j}),R=h(()=>fe(n.value)),oa=h(()=>{const a={};if(e.options===void 0){for(let l=1;l<=ne.value;l++)a[l]=!0;return a}const t=typeof e.options=="function"?e.options:l=>e.options.includes(l);for(let l=1;l<=ne.value;l++){const c=R.value+"/"+Z(l);a[l]=t(c)}return a}),na=h(()=>{const a={};if(e.events===void 0)for(let t=1;t<=ne.value;t++)a[t]=!1;else{const t=typeof e.events=="function"?e.events:l=>e.events.includes(l);for(let l=1;l<=ne.value;l++){const c=R.value+"/"+Z(l);a[l]=t(c)===!0&&Je.value(c)}}return a}),Me=h(()=>{let a,t;const{year:l,month:c}=n.value;if(e.calendar!=="persian")a=new Date(l,c-1,1),t=new Date(l,c-1,0).getDate();else{const d=Da(l,c,1);a=new Date(d.gy,d.gm-1,d.gd);let H=c-1,f=l;H===0&&(H=12,f--),t=da(f,H)}return{days:a.getDay()-qe.value-1,endDay:t}}),pe=h(()=>{const a=[],{days:t,endDay:l}=Me.value,c=t<0?t+7:t;if(c<6)for(let f=l-c;f<=l;f++)a.push({i:f,fill:!0});const d=a.length;for(let f=1;f<=ne.value;f++){const k={i:f,event:na.value[f],classes:[]};oa.value[f]===!0&&(k.in=!0,k.flat=!0),a.push(k)}if(De.value[R.value]!==void 0&&De.value[R.value].forEach(f=>{const k=d+f-1;Object.assign(a[k],{selected:!0,unelevated:!0,flat:!1,color:ee.value,textColor:ae.value})}),Ke.value[R.value]!==void 0&&Ke.value[R.value].forEach(f=>{if(f.from!==void 0){const k=d+f.from-1,j=d+(f.to||ne.value)-1;for(let sa=k;sa<=j;sa++)Object.assign(a[sa],{range:f.range,unelevated:!0,color:ee.value,textColor:ae.value});Object.assign(a[k],{rangeFrom:!0,flat:!1}),f.to!==void 0&&Object.assign(a[j],{rangeTo:!0,flat:!1})}else if(f.to!==void 0){const k=d+f.to-1;for(let j=d;j<=k;j++)Object.assign(a[j],{range:f.range,unelevated:!0,color:ee.value,textColor:ae.value});Object.assign(a[k],{flat:!1,rangeTo:!0})}else{const k=d+ne.value-1;for(let j=d;j<=k;j++)Object.assign(a[j],{range:f.range,unelevated:!0,color:ee.value,textColor:ae.value})}}),ge.value!==void 0){const f=d+ge.value.from-1,k=d+ge.value.to-1;for(let j=f;j<=k;j++)a[j].color=ee.value,a[j].editRange=!0;ge.value.includeFrom===!0&&(a[f].editRangeFrom=!0),ge.value.includeTo===!0&&(a[k].editRangeTo=!0)}n.value.year===b.value.year&&n.value.month===b.value.month&&(a[d+b.value.day-1].today=!0);const H=a.length%7;if(H>0){const f=7-H;for(let k=1;k<=f;k++)a.push({i:k,fill:!0})}return a.forEach(f=>{let k="q-date__calendar-item ";f.fill===!0?k+="q-date__calendar-item--fill":(k+=`q-date__calendar-item--${f.in===!0?"in":"out"}`,f.range!==void 0&&(k+=` q-date__range${f.rangeTo===!0?"-to":f.rangeFrom===!0?"-from":""}`),f.editRange===!0&&(k+=` q-date__edit-range${f.editRangeFrom===!0?"-from":""}${f.editRangeTo===!0?"-to":""}`),(f.range!==void 0||f.editRange===!0)&&(k+=` text-${f.color}`)),f.classes=k}),a}),$e=h(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});oe(()=>e.modelValue,a=>{if(N===a)N=0;else{const{year:t,month:l}=o($.value,p.value);W(t,l)}}),oe(S,()=>{z.value!==null&&M.$el.contains(document.activeElement)===!0&&z.value.focus()}),oe(()=>n.value.year,a=>{w("navigation",{year:a,month:n.value.month})}),oe(()=>n.value.month,a=>{w("navigation",{year:n.value.year,month:a})}),oe(ce,a=>{ba(a,p.value,"mask"),$.value=a}),oe(Ae,a=>{ba($.value,a,"locale"),p.value=a});function Re(){const a=b.value,t=De.value[fe(a)];(t===void 0||t.includes(a.day)===!1)&&ra(a),ie(a.year,a.month)}function We(a){Ma(a)===!0&&(S.value=a)}function Ge(a,t){["month","year"].includes(a)&&(a==="month"?_:V)(t===!0?-1:1)}function ie(a,t){S.value="Calendar",W(a,t)}function Ue(a,t){if(e.range===!1||!a){J.value=null;return}const l=Object.assign({...n.value},a),c=t!==void 0?Object.assign({...n.value},t):l;J.value={init:l,initHash:ue(l),final:c,finalHash:ue(c)},ie(l.year,l.month)}function Xe(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ne(a,t,l){return Le(a,t,l,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function o(a,t){const l=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(l.length===0)return r();const c=l[l.length-1],d=Ne(c.from!==void 0?c.from:c,a,t);return d.dateHash===null?r():d}function r(){let a,t;if(e.defaultYearMonth!==void 0){const l=e.defaultYearMonth.split("/");a=parseInt(l[0],10),t=parseInt(l[1],10)}else{const l=b.value!==void 0?b.value:T();a=l.year,t=l.month}return{year:a,month:t,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:a+"/"+Z(t)+"/01"}}function _(a){let t=n.value.year,l=Number(n.value.month)+a;l===13?(l=1,t++):l===0&&(l=12,t--),W(t,l),K.value===!0&&Se("month")}function V(a){const t=Number(n.value.year)+a;W(t,n.value.month),K.value===!0&&Se("year")}function I(a){W(a,n.value.month),S.value=e.defaultView==="Years"?"Months":"Calendar",K.value===!0&&Se("year")}function G(a){W(n.value.year,a),S.value="Calendar",K.value===!0&&Se("month")}function C(a,t){const l=De.value[t];(l!==void 0&&l.includes(a.day)===!0?ia:ra)(a)}function P(a){return{year:a.year,month:a.month,day:a.day}}function W(a,t){U.value!==null&&a<=U.value.year&&(a=U.value.year,t<U.value.month&&(t=U.value.month)),L.value!==null&&a>=L.value.year&&(a=L.value.year,t>L.value.month&&(t=L.value.month));const l=a+"/"+Z(t)+"/01";l!==n.value.dateHash&&(ve.value=n.value.dateHash<l==(A.lang.rtl!==!0)?"left":"right",a!==n.value.year&&(Q.value=ve.value),va(()=>{he.value=a-a%be-(a<0?be:0),Object.assign(n.value,{year:a,month:t,day:1,dateHash:l})}))}function Ze(a,t,l){const c=a!==null&&a.length===1&&e.multiple===!1?a[0]:a;N=c;const{reason:d,details:H}=pa(t,l);w("update:modelValue",c,d,H)}function Se(a){const t=B.value[0]!==void 0&&B.value[0].dateHash!==null?{...B.value[0]}:{...n.value};va(()=>{t.year=n.value.year,t.month=n.value.month;const l=e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():da(t.year,t.month);t.day=Math.min(Math.max(1,t.day),l);const c=xe(t);N=c;const{details:d}=pa("",t);w("update:modelValue",c,a,d)})}function pa(a,t){return t.from!==void 0?{reason:`${a}-range`,details:{...P(t.target),from:P(t.from),to:P(t.to)}}:{reason:`${a}-day`,details:P(t)}}function xe(a,t,l){return a.from!==void 0?{from:Fe.value(a.from,t,l),to:Fe.value(a.to,t,l)}:Fe.value(a,t,l)}function ra(a){let t;if(e.multiple===!0)if(a.from!==void 0){const l=ue(a.from),c=ue(a.to),d=B.value.filter(f=>f.dateHash<l||f.dateHash>c),H=te.value.filter(({from:f,to:k})=>k.dateHash<l||f.dateHash>c);t=d.concat(H).concat(a).map(f=>xe(f))}else{const l=re.value.slice();l.push(xe(a)),t=l}else t=xe(a);Ze(t,"add",a)}function ia(a){if(e.noUnset===!0)return;let t=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const l=xe(a);a.from!==void 0?t=e.modelValue.filter(c=>c.from!==void 0?c.from!==l.from&&c.to!==l.to:!0):t=e.modelValue.filter(c=>c!==l),t.length===0&&(t=null)}Ze(t,"remove",a)}function ba(a,t,l){const c=B.value.concat(te.value).map(d=>xe(d,a,t)).filter(d=>d.from!==void 0?d.from.dateHash!==null&&d.to.dateHash!==null:d.dateHash!==null);w("update:modelValue",(e.multiple===!0?c:c[0])||null,l)}function Ba(){if(e.minimal!==!0)return s("div",{class:"q-date__header "+m.value},[s("div",{class:"relative-position"},[s(Oe,{name:"q-transition--fade"},()=>s("div",{key:"h-yr-"+Qe.value,class:"q-date__header-subtitle q-date__header-link "+(S.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:q.value,...u("vY",{onClick(){S.value="Years"},onKeyup(a){a.keyCode===13&&(S.value="Years")}})},[Qe.value]))]),s("div",{class:"q-date__header-title relative-position flex no-wrap"},[s("div",{class:"relative-position col"},[s(Oe,{name:"q-transition--fade"},()=>s("div",{key:"h-sub"+ye.value,class:"q-date__header-title-label q-date__header-link "+(S.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:q.value,...u("vC",{onClick(){S.value="Calendar"},onKeyup(a){a.keyCode===13&&(S.value="Calendar")}})},[ye.value]))]),e.todayBtn===!0?s(F,{class:"q-date__header-today self-start",icon:A.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:q.value,onClick:Re}):null])])}function ua({label:a,type:t,key:l,dir:c,goTo:d,boundaries:H,cls:f}){return[s("div",{class:"row items-center q-date__arrow"},[s(F,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ce.value[0],tabindex:q.value,disable:H.prev===!1,...u("go-#"+t,{onClick(){d(-1)}})})]),s("div",{class:"relative-position overflow-hidden flex flex-center"+f},[s(Oe,{name:"q-transition--jump-"+c},()=>s("div",{key:l},[s(F,{flat:!0,dense:!0,noCaps:!0,label:a,tabindex:q.value,...u("view#"+t,{onClick:()=>{S.value=t}})})]))]),s("div",{class:"row items-center q-date__arrow"},[s(F,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ce.value[1],tabindex:q.value,disable:H.next===!1,...u("go+#"+t,{onClick(){d(1)}})})])]}const za={Calendar:()=>[s("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[s("div",{class:"q-date__navigation row items-center no-wrap"},ua({label:p.value.months[n.value.month-1],type:"Months",key:n.value.month,dir:ve.value,goTo:_,boundaries:Ye.value.month,cls:" col"}).concat(ua({label:n.value.year,type:"Years",key:n.value.year,dir:Q.value,goTo:V,boundaries:Ye.value.year,cls:""}))),s("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Te.value.map(a=>s("div",{class:"q-date__calendar-item"},[s("div",a)]))),s("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[s(Oe,{name:"q-transition--slide-"+ve.value},()=>s("div",{key:R.value,class:"q-date__calendar-days fit"},pe.value.map(a=>s("div",{class:a.classes},[a.in===!0?s(F,{class:a.today===!0?"q-date__today":"",dense:!0,flat:a.flat,unelevated:a.unelevated,color:a.color,textColor:a.textColor,label:a.i,tabindex:q.value,...u("day#"+a.i,{onClick:()=>{Qa(a.i)},onMouseover:()=>{Ja(a.i)}})},a.event!==!1?()=>s("div",{class:"q-date__event bg-"+a.event}):null):s("div",""+a.i)]))))])])],Months(){const a=n.value.year===b.value.year,t=c=>U.value!==null&&n.value.year===U.value.year&&U.value.month>c||L.value!==null&&n.value.year===L.value.year&&L.value.month<c,l=p.value.monthsShort.map((c,d)=>{const H=n.value.month===d+1;return s("div",{class:"q-date__months-item flex flex-center"},[s(F,{class:a===!0&&b.value.month===d+1?"q-date__today":null,flat:H!==!0,label:c,unelevated:H,color:H===!0?ee.value:null,textColor:H===!0?ae.value:null,tabindex:q.value,disable:t(d+1),...u("month#"+d,{onClick:()=>{G(d+1)}})})])});return e.yearsInMonthView===!0&&l.unshift(s("div",{class:"row no-wrap full-width"},[ua({label:n.value.year,type:"Years",key:n.value.year,dir:Q.value,goTo:V,boundaries:Ye.value.year,cls:" col"})])),s("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const a=he.value,t=a+be,l=[],c=d=>U.value!==null&&U.value.year>d||L.value!==null&&L.value.year<d;for(let d=a;d<=t;d++){const H=n.value.year===d;l.push(s("div",{class:"q-date__years-item flex flex-center"},[s(F,{key:"yr"+d,class:b.value.year===d?"q-date__today":null,flat:!H,label:d,dense:!0,unelevated:H,color:H===!0?ee.value:null,textColor:H===!0?ae.value:null,tabindex:q.value,disable:c(d),...u("yr#"+d,{onClick:()=>{I(d)}})})]))}return s("div",{class:"q-date__view q-date__years flex flex-center"},[s("div",{class:"col-auto"},[s(F,{round:!0,dense:!0,flat:!0,icon:Ce.value[0],tabindex:q.value,disable:c(a),...u("y-",{onClick:()=>{he.value-=be}})})]),s("div",{class:"q-date__years-content col self-stretch row items-center"},l),s("div",{class:"col-auto"},[s(F,{round:!0,dense:!0,flat:!0,icon:Ce.value[1],tabindex:q.value,disable:c(t),...u("y+",{onClick:()=>{he.value+=be}})})])])}};function Qa(a){const t={...n.value,day:a};if(e.range===!1){C(t,R.value);return}if(J.value===null){const l=pe.value.find(d=>d.fill!==!0&&d.i===a);if(e.noUnset!==!0&&l.range!==void 0){ia({target:t,from:l.range.from,to:l.range.to});return}if(l.selected===!0){ia(t);return}const c=ue(t);J.value={init:t,initHash:c,final:t,finalHash:c},w("rangeStart",P(t))}else{const l=J.value.initHash,c=ue(t),d=l<=c?{from:J.value.init,to:t}:{from:t,to:J.value.init};J.value=null,ra(l===c?t:{target:t,...d}),w("rangeEnd",{from:P(d.from),to:P(d.to)})}}function Ja(a){if(J.value!==null){const t={...n.value,day:a};Object.assign(J.value,{final:t,finalHash:ue(t)})}}return Object.assign(M,{setToday:Re,setView:We,offsetCalendar:Ge,setCalendarTo:ie,setEditingRange:Ue}),()=>{const a=[s("div",{class:"q-date__content col relative-position"},[s(Oe,{name:"q-transition--fade"},za[S.value])])],t=Ea(i.default);return t!==void 0&&a.push(s("div",{class:"q-date__actions"},t)),e.name!==void 0&&e.disable!==!0&&x(a,"push"),s("div",{class:_e.value,...$e.value},[Ba(),s("div",{ref:z,class:"q-date__main col column",tabindex:-1},a)])}}}),Ee=fa({name:"QPopupProxy",props:{...rt,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:i,emit:w,attrs:M}){const{proxy:A}=ha(),{$q:Y}=A,u=O(!1),q=O(null),m=h(()=>parseInt(e.breakpoint,10)),{canShow:E}=it({showing:u});function T(){return Y.screen.width<m.value||Y.screen.height<m.value?"dialog":"menu"}const N=O(T()),D=h(()=>N.value==="menu"?{maxHeight:"99vh"}:{});oe(()=>T(),$=>{u.value!==!0&&(N.value=$)});function x($){u.value=!0,w("show",$)}function z($){u.value=!1,N.value=T(),w("hide",$)}return Object.assign(A,{show($){E($)===!0&&q.value.show($)},hide($){q.value.hide($)},toggle($){q.value.toggle($)}}),Ra(A,"currentComponent",()=>({type:N.value,ref:q.value})),()=>{const $={ref:q,...D.value,...M,onShow:x,onHide:z};let p;return N.value==="dialog"?p=ma:(p=ut,Object.assign($,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),s(p,$,i.default)}}});function _t(e,i){if(e.hour!==null){if(e.minute===null)return"minute";if(i===!0&&e.second===null)return"second"}return"hour"}function yt(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}var la=fa({name:"QTime",props:{...xa,...Sa,...Ya,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Ua,setup(e,{slots:i,emit:w}){const M=ha(),{$q:A}=M.proxy,Y=Ha(e,A),{tabindex:u,headerClass:q,getLocale:m,getCurrentDate:E}=Na(e,A),T=Oa(e),N=Ia(T);let D,x;const z=O(null),$=h(()=>Qe()),p=h(()=>m()),ce=h(()=>Ce()),Ae=Le(e.modelValue,$.value,p.value,e.calendar,ce.value),b=O(_t(Ae)),n=O(Ae),S=O(Ae.hour===null||Ae.hour<12),Be=h(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(Y.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),ve=h(()=>{const o=n.value;return{hour:o.hour===null?"--":Q.value===!0?Z(o.hour):String(S.value===!0?o.hour===0?12:o.hour:o.hour>12?o.hour-12:o.hour),minute:o.minute===null?"--":Z(o.minute),second:o.second===null?"--":Z(o.second)}}),Q=h(()=>e.format24h!==null?e.format24h:A.lang.date.format24h),je=h(()=>{const o=b.value==="hour",r=o===!0?12:60,_=n.value[b.value];let I=`rotate(${Math.round(_*(360/r))-180}deg) translateX(-50%)`;return o===!0&&Q.value===!0&&n.value.hour>=12&&(I+=" scale(.7)"),{transform:I}}),he=h(()=>n.value.hour!==null),J=h(()=>he.value===!0&&n.value.minute!==null),_e=h(()=>e.hourOptions!==void 0?o=>e.hourOptions.includes(o):e.options!==void 0?o=>e.options(o,null,null):null),ee=h(()=>e.minuteOptions!==void 0?o=>e.minuteOptions.includes(o):e.options!==void 0?o=>e.options(n.value.hour,o,null):null),ae=h(()=>e.secondOptions!==void 0?o=>e.secondOptions.includes(o):e.options!==void 0?o=>e.options(n.value.hour,n.value.minute,o):null),K=h(()=>{if(_e.value===null)return null;const o=ye(0,11,_e.value),r=ye(12,11,_e.value);return{am:o,pm:r,values:o.values.concat(r.values)}}),re=h(()=>ee.value!==null?ye(0,59,ee.value):null),B=h(()=>ae.value!==null?ye(0,59,ae.value):null),te=h(()=>{switch(b.value){case"hour":return K.value;case"minute":return re.value;case"second":return B.value}}),Ve=h(()=>{let o,r,_=0,V=1;const I=te.value!==null?te.value.values:void 0;b.value==="hour"?Q.value===!0?(o=0,r=23):(o=0,r=11,S.value===!1&&(_=12)):(o=0,r=55,V=5);const G=[];for(let C=o,P=o;C<=r;C+=V,P++){const W=C+_,Ze=I!==void 0&&I.includes(W)===!1,Se=b.value==="hour"&&C===0?Q.value===!0?"00":"12":C;G.push({val:W,index:P,disable:Ze,label:Se})}return G}),Fe=h(()=>[[vt,ne,void 0,{stop:!0,prevent:!0,mouse:!0}]]);oe(()=>e.modelValue,o=>{const r=Le(o,$.value,p.value,e.calendar,ce.value);(r.dateHash!==n.value.dateHash||r.timeHash!==n.value.timeHash)&&(n.value=r,r.hour===null?b.value="hour":S.value=r.hour<12)}),oe([$,p],()=>{va(()=>{Ue()})});function me(){const o={...E(),...yt()};Ue(o),Object.assign(n.value,o),b.value="hour"}function ye(o,r,_){const V=Array.apply(null,{length:r+1}).map((I,G)=>{const C=G+o;return{index:C,val:_(C)===!0}}).filter(I=>I.val===!0).map(I=>I.index);return{min:V[0],max:V[V.length-1],values:V,threshold:r+1}}function ze(o,r,_){const V=Math.abs(o-r);return Math.min(V,_-V)}function Pe(o,{min:r,max:_,values:V,threshold:I}){if(o===r)return r;if(o<r||o>_)return ze(o,r,I)<=ze(o,_,I)?r:_;const G=V.findIndex(W=>o<=W),C=V[G-1],P=V[G];return o-C<=P-o?C:P}function Qe(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function Ce(){if(typeof e.defaultDate!="string"){const o=E(!0);return o.dateHash=ue(o),o}return Le(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function qe(){return Ga(M)===!0||te.value!==null&&(te.value.values.length===0||b.value==="hour"&&Q.value!==!0&&K.value[S.value===!0?"am":"pm"].values.length===0)}function Te(){const o=z.value,{top:r,left:_,width:V}=o.getBoundingClientRect(),I=V/2;return{top:r+I,left:_+I,dist:I*.7}}function ne(o){if(qe()!==!0){if(o.isFirst===!0){D=Te(),x=U(o.evt,D);return}x=U(o.evt,D,x),o.isFinal===!0&&(D=!1,x=null,Je())}}function Je(){b.value==="hour"?b.value="minute":e.withSeconds&&b.value==="minute"&&(b.value="second")}function U(o,r,_){const V=Wa(o),I=Math.abs(V.top-r.top),G=Math.sqrt(Math.pow(Math.abs(V.top-r.top),2)+Math.pow(Math.abs(V.left-r.left),2));let C,P=Math.asin(I/G)*(180/Math.PI);if(V.top<r.top?P=r.left<V.left?90-P:270+P:P=r.left<V.left?P+90:270-P,b.value==="hour"){if(C=P/30,K.value!==null){const W=Q.value!==!0?S.value===!0:K.value.am.values.length>0&&K.value.pm.values.length>0?G>=r.dist:K.value.am.values.length>0;C=Pe(C+(W===!0?0:12),K.value[W===!0?"am":"pm"])}else C=Math.round(C),Q.value===!0?G<r.dist?C<12&&(C+=12):C===12&&(C=0):S.value===!0&&C===12?C=0:S.value===!1&&C!==12&&(C+=12);Q.value===!0&&(S.value=C<12)}else C=Math.round(P/6)%60,b.value==="minute"&&re.value!==null?C=Pe(C,re.value):b.value==="second"&&B.value!==null&&(C=Pe(C,B.value));return _!==C&&Re[b.value](C),C}const L={hour(){b.value="hour"},minute(){b.value="minute"},second(){b.value="second"}};function Ye(o){o.keyCode===13&&We()}function De(o){o.keyCode===13&&Ge()}function Ke(o){qe()!==!0&&(A.platform.is.desktop!==!0&&U(o,Te()),Je())}function ge(o){qe()!==!0&&U(o,Te())}function R(o){if(o.keyCode===13)b.value="hour";else if([37,39].includes(o.keyCode)){const r=o.keyCode===37?-1:1;if(K.value!==null){const _=Q.value===!0?K.value.values:K.value[S.value===!0?"am":"pm"].values;if(_.length===0)return;if(n.value.hour===null)Me(_[0]);else{const V=(_.length+_.indexOf(n.value.hour)+r)%_.length;Me(_[V])}}else{const _=Q.value===!0?24:12,V=Q.value!==!0&&S.value===!1?12:0,I=n.value.hour===null?-r:n.value.hour;Me(V+(24+I+r)%_)}}}function oa(o){if(o.keyCode===13)b.value="minute";else if([37,39].includes(o.keyCode)){const r=o.keyCode===37?-1:1;if(re.value!==null){const _=re.value.values;if(_.length===0)return;if(n.value.minute===null)pe(_[0]);else{const V=(_.length+_.indexOf(n.value.minute)+r)%_.length;pe(_[V])}}else{const _=n.value.minute===null?-r:n.value.minute;pe((60+_+r)%60)}}}function na(o){if(o.keyCode===13)b.value="second";else if([37,39].includes(o.keyCode)){const r=o.keyCode===37?-1:1;if(B.value!==null){const _=B.value.values;if(_.length===0)return;if(n.value.seconds===null)$e(_[0]);else{const V=(_.length+_.indexOf(n.value.second)+r)%_.length;$e(_[V])}}else{const _=n.value.second===null?-r:n.value.second;$e((60+_+r)%60)}}}function Me(o){n.value.hour!==o&&(n.value.hour=o,ie())}function pe(o){n.value.minute!==o&&(n.value.minute=o,ie())}function $e(o){n.value.second!==o&&(n.value.second=o,ie())}const Re={hour:Me,minute:pe,second:$e};function We(){S.value===!1&&(S.value=!0,n.value.hour!==null&&(n.value.hour-=12,ie()))}function Ge(){S.value===!0&&(S.value=!1,n.value.hour!==null&&(n.value.hour+=12,ie()))}function ie(){if(_e.value!==null&&_e.value(n.value.hour)!==!0){n.value=Le(),b.value="hour";return}if(ee.value!==null&&ee.value(n.value.minute)!==!0){n.value.minute=null,n.value.second=null,b.value="minute";return}if(e.withSeconds===!0&&ae.value!==null&&ae.value(n.value.second)!==!0){n.value.second=null,b.value="second";return}n.value.hour===null||n.value.minute===null||e.withSeconds===!0&&n.value.second===null||Ue()}function Ue(o){const r=Object.assign({...n.value},o),_=e.calendar==="persian"?Z(r.hour)+":"+Z(r.minute)+(e.withSeconds===!0?":"+Z(r.second):""):Pa(new Date(r.year,r.month===null?null:r.month-1,r.day,r.hour,r.minute,r.second,r.millisecond),$.value,p.value,r.year,r.timezoneOffset);r.changed=_!==e.modelValue,w("update:modelValue",_,r)}function Xe(){const o=[s("div",{class:"q-time__link "+(b.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onClick:L.hour,onKeyup:R},ve.value.hour),s("div",":"),s("div",he.value===!0?{class:"q-time__link "+(b.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onKeyup:oa,onClick:L.minute}:{class:"q-time__link"},ve.value.minute)];e.withSeconds===!0&&o.push(s("div",":"),s("div",J.value===!0?{class:"q-time__link "+(b.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onKeyup:na,onClick:L.second}:{class:"q-time__link"},ve.value.second));const r=[s("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},o)];return Q.value===!1&&r.push(s("div",{class:"q-time__header-ampm column items-between no-wrap"},[s("div",{class:"q-time__link "+(S.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onClick:We,onKeyup:Ye},"AM"),s("div",{class:"q-time__link "+(S.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onClick:Ge,onKeyup:De},"PM")])),s("div",{class:"q-time__header flex flex-center no-wrap "+q.value},r)}function Ne(){const o=n.value[b.value];return s("div",{class:"q-time__content col relative-position"},[s(Oe,{name:"q-transition--scale"},()=>s("div",{key:"clock"+b.value,class:"q-time__container-parent absolute-full"},[s("div",{ref:z,class:"q-time__container-child fit overflow-hidden"},[we(s("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Ke,onMousedown:ge},[s("div",{class:"q-time__clock-circle fit"},[s("div",{class:"q-time__clock-pointer"+(n.value[b.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:je.value}),Ve.value.map(r=>s("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${r.index}`+(r.val===o?" q-time__clock-position--active "+q.value:r.disable===!0?" q-time__clock-position--disable":"")},[s("span",r.label)]))])]),Fe.value)])])),e.nowBtn===!0?s(F,{class:"q-time__now-button absolute",icon:A.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:u.value,onClick:me}):null])}return M.proxy.setNow=me,()=>{const o=[Ne()],r=Ea(i.default);return r!==void 0&&o.push(s("div",{class:"q-time__actions"},r)),e.name!==void 0&&e.disable!==!0&&N(o,"push"),s("div",{class:Be.value,tabindex:-1},[Xe(),s("div",{class:"q-time__main col overflow-auto"},o)])}}});function $a(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const i=parseInt(e,10);return isNaN(i)?0:i}var Ie=Xa({name:"close-popup",beforeMount(e,{value:i}){const w={depth:$a(i),handler(M){w.depth!==0&&setTimeout(()=>{const A=Za(e);A!==void 0&&et(A,M,w.depth)})},handlerKey(M){at(M,13)===!0&&w.handler(M)}};e.__qclosepopup=w,e.addEventListener("click",w.handler),e.addEventListener("keyup",w.handlerKey)},updated(e,{value:i,oldValue:w}){i!==w&&(e.__qclosepopup.depth=$a(i))},beforeUnmount(e){const i=e.__qclosepopup;e.removeEventListener("click",i.handler),e.removeEventListener("keyup",i.handlerKey),delete e.__qclosepopup}});const gt=_a({name:"AgregarApertura",setup(e,{emit:i}){const w=O({periodo_id:"",lugar:"",descripcion:"",fecha_inicio:"",hora_inicio:"",hora_fin:"",observacion:""}),M=O(!1),A=O([]),{mostrarNotify:Y}=ga(),u=async()=>{try{const{data:{periodos:m}}=await ke.get("/periodos/activos");A.value=[],m.forEach(E=>{A.value.push({label:E.nombre,value:E.id})})}catch(m){alert(m)}},q=async()=>{try{if(w.value.hora_inicio>w.value.hora_fin)return Y("warning","La hora de finalizaci\xF3n debe ser superior a la de inicio","top-right");M.value=!0;const{data:m}=await ke.post("/aperturas",w.value);i("actualizarLista"),Y("positive",m.msg,"top-right"),M.value=!1}catch(m){M.value=!1,Y("warning",m.response.data.errors[0].msg,"top-right")}};return oe(w.value,(m,E)=>{w.value.descripcion=m.descripcion.toUpperCase(),w.value.lugar=m.lugar.toUpperCase()}),u(),{myLocale:{days:"Domingo_Lunes_Martes_Mi\xE9rcoles_Jueves_Viernes_S\xE1bado".split("_"),daysShort:"Dom_Lun_Mar_Mi\xE9_Jue_Vie_S\xE1b".split("_"),months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),firstDayOfWeek:1,format24h:!0,pluralDay:"dias"},listPeriodos:A,loading:M,formApertura:w,onSubmit:q,optionsFn(m){return m>="2023/03/06"}}}}),pt=y("div",{class:"text-h6"},"Agregar Apertura de Votaci\xF3n",-1),bt={class:"row q-gutter-sm justify-around"},wt={class:"col-xs-12 col-sm-5"},kt=y("label",null,"Periodo:",-1),At={class:"col-xs-12 col-sm-5"},Vt=y("label",null,"Descripci\xF3n:",-1),Ct={class:"col-xs-12 col-sm-5"},qt=y("label",null,"Lugar Elecciones:",-1),Dt={class:"col-xs-12 col-sm-5"},Mt=y("label",null,"Fecha de Inicio:",-1),$t={class:"row items-center justify-end"},St={class:"col-xs-12 col-sm-5"},xt=y("label",null,"Hora de Inicio:",-1),Ht={class:"row items-center justify-end"},Ot={class:"col-xs-12 col-sm-5"},Et=y("label",null,"Hora de Finalizaci\xF3n:",-1),It={class:"row items-center justify-end"},jt={class:"col-xs-12 col-sm-8"},Ft=y("label",null,"Observaci\xF3n:",-1),Pt={class:"col-xs-9 col-sm-12 flex justify-center"};function Tt(e,i,w,M,A,Y){return le(),se(ja,{style:{width:"650px","max-width":"80vw"}},{default:g(()=>[v(ta,null,{default:g(()=>[pt]),_:1}),v(ta,null,{default:g(()=>[v(Ta,{onSubmit:e.onSubmit},{default:g(()=>[y("div",bt,[y("div",wt,[kt,v(Fa,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formApertura.periodo_id,"onUpdate:modelValue":i[0]||(i[0]=u=>e.formApertura.periodo_id=u),options:e.listPeriodos},null,8,["modelValue","options"])]),y("div",At,[Vt,v(X,{modelValue:e.formApertura.descripcion,"onUpdate:modelValue":i[1]||(i[1]=u=>e.formApertura.descripcion=u),dense:"",filled:"",required:""},null,8,["modelValue"])]),y("div",Ct,[qt,v(X,{modelValue:e.formApertura.lugar,"onUpdate:modelValue":i[2]||(i[2]=u=>e.formApertura.lugar=u),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),y("div",Dt,[Mt,v(X,{filled:"",modelValue:e.formApertura.fecha_inicio,"onUpdate:modelValue":i[4]||(i[4]=u=>e.formApertura.fecha_inicio=u),dense:"",mask:"date",clearable:"","clear-icon":"close",required:""},{append:g(()=>[v(de,{name:"event",class:"cursor-pointer"},{default:g(()=>[v(Ee,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:g(()=>[v(La,{modelValue:e.formApertura.fecha_inicio,"onUpdate:modelValue":i[3]||(i[3]=u=>e.formApertura.fecha_inicio=u),options:e.optionsFn,locale:e.myLocale},{default:g(()=>[y("div",$t,[we(v(F,{label:"Close",color:"primary",flat:""},null,512),[[Ie]])])]),_:1},8,["modelValue","options","locale"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),y("div",St,[xt,v(X,{filled:"",dense:"",modelValue:e.formApertura.hora_inicio,"onUpdate:modelValue":i[6]||(i[6]=u=>e.formApertura.hora_inicio=u),mask:"time",rules:["time"]},{append:g(()=>[v(de,{name:"access_time",class:"cursor-pointer"},{default:g(()=>[v(Ee,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:g(()=>[v(la,{modelValue:e.formApertura.hora_inicio,"onUpdate:modelValue":i[5]||(i[5]=u=>e.formApertura.hora_inicio=u)},{default:g(()=>[y("div",Ht,[we(v(F,{label:"Close",color:"primary",flat:""},null,512),[[Ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),y("div",Ot,[Et,v(X,{filled:"",dense:"",modelValue:e.formApertura.hora_fin,"onUpdate:modelValue":i[8]||(i[8]=u=>e.formApertura.hora_fin=u),mask:"time",rules:["time"]},{append:g(()=>[v(de,{name:"access_time",class:"cursor-pointer"},{default:g(()=>[v(Ee,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:g(()=>[v(la,{modelValue:e.formApertura.hora_fin,"onUpdate:modelValue":i[7]||(i[7]=u=>e.formApertura.hora_fin=u)},{default:g(()=>[y("div",It,[we(v(F,{label:"Close",color:"primary",flat:""},null,512),[[Ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),y("div",jt,[Ft,v(X,{modelValue:e.formApertura.observacion,"onUpdate:modelValue":i[9]||(i[9]=u=>e.formApertura.observacion=u),rows:"3",filled:"",type:"textarea"},null,8,["modelValue"])]),y("div",Pt,[v(F,{label:"Guardar",class:"q-px-xl q-my-sm",loading:e.loading,type:"submit",color:"green-9"},null,8,["loading"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var Yt=ya(gt,[["render",Tt]]);const Ut=_a({name:"editarApertura",props:["aperturaData"],setup(e,{emit:i}){const{descripcion:w,fecha_inicio:M,hora_fin:A,hora_inicio:Y,id:u,lugar_votacion:q,observacion:m,periodo_id:E}=e.aperturaData,T=O({id:u,periodo_id:E,lugar:q,descripcion:w,fecha_inicio:M,hora_inicio:Y,hora_fin:A,observacion:m}),N=O(!1),D=O([]),{mostrarNotify:x}=ga(),z=async()=>{try{const{data:{periodos:p}}=await ke.get("/periodos/activos");D.value=[],p.forEach(ce=>{D.value.push({label:ce.nombre,value:ce.id})})}catch(p){alert(p)}},$=async()=>{try{if(T.value.hora_inicio>T.value.hora_fin)return x("warning","La hora de finalizaci\xF3n debe ser superior a la de inicio","top-right");N.value=!0;const{data:p}=await ke.put("/aperturas",T.value);i("actualizarLista"),x("positive",p.msg,"top-right"),N.value=!1}catch(p){N.value=!1,x("warning",p.response.data.errors[0].msg,"top-right")}};return oe(T.value,(p,ce)=>{T.value.descripcion=p.descripcion.toUpperCase(),T.value.lugar=p.lugar.toUpperCase()}),z(),{myLocale:{days:"Domingo_Lunes_Martes_Mi\xE9rcoles_Jueves_Viernes_S\xE1bado".split("_"),daysShort:"Dom_Lun_Mar_Mi\xE9_Jue_Vie_S\xE1b".split("_"),months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),firstDayOfWeek:1,format24h:!0,pluralDay:"dias"},listPeriodos:D,loading:N,formApertura:T,onSubmit:$,optionsFn(p){return p>="2023/03/06"}}}}),Nt=y("div",{class:"text-h6"},"Editar Apertura de Votaci\xF3n",-1),Lt={class:"row q-gutter-sm justify-around"},Bt={class:"col-xs-12 col-sm-5"},zt=y("label",null,"Periodo:",-1),Qt={class:"col-xs-12 col-sm-5"},Jt=y("label",null,"Descripci\xF3n:",-1),Kt={class:"col-xs-12 col-sm-5"},Rt=y("label",null,"Lugar Elecciones:",-1),Wt={class:"col-xs-12 col-sm-5"},Gt=y("label",null,"Fecha de Inicio:",-1),Xt={class:"row items-center justify-end"},Zt={class:"col-xs-12 col-sm-5"},el=y("label",null,"Hora de Inicio:",-1),al={class:"row items-center justify-end"},tl={class:"col-xs-12 col-sm-5"},ll=y("label",null,"Hora de Finalizaci\xF3n:",-1),ol={class:"row items-center justify-end"},nl={class:"col-xs-12 col-sm-8"},rl=y("label",null,"Observaci\xF3n:",-1),il={class:"col-xs-9 col-sm-12 flex justify-center"};function ul(e,i,w,M,A,Y){return le(),se(ja,{style:{width:"650px","max-width":"80vw"}},{default:g(()=>[v(ta,null,{default:g(()=>[Nt]),_:1}),v(ta,null,{default:g(()=>[v(Ta,{onSubmit:e.onSubmit},{default:g(()=>[y("div",Lt,[y("div",Bt,[zt,v(Fa,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formApertura.periodo_id,"onUpdate:modelValue":i[0]||(i[0]=u=>e.formApertura.periodo_id=u),options:e.listPeriodos},null,8,["modelValue","options"])]),y("div",Qt,[Jt,v(X,{modelValue:e.formApertura.descripcion,"onUpdate:modelValue":i[1]||(i[1]=u=>e.formApertura.descripcion=u),dense:"",filled:"",required:""},null,8,["modelValue"])]),y("div",Kt,[Rt,v(X,{modelValue:e.formApertura.lugar,"onUpdate:modelValue":i[2]||(i[2]=u=>e.formApertura.lugar=u),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),y("div",Wt,[Gt,v(X,{filled:"",modelValue:e.formApertura.fecha_inicio,"onUpdate:modelValue":i[4]||(i[4]=u=>e.formApertura.fecha_inicio=u),dense:"",mask:"date",clearable:"","clear-icon":"close",required:""},{append:g(()=>[v(de,{name:"event",class:"cursor-pointer"},{default:g(()=>[v(Ee,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:g(()=>[v(La,{modelValue:e.formApertura.fecha_inicio,"onUpdate:modelValue":i[3]||(i[3]=u=>e.formApertura.fecha_inicio=u),options:e.optionsFn,locale:e.myLocale},{default:g(()=>[y("div",Xt,[we(v(F,{label:"Close",color:"primary",flat:""},null,512),[[Ie]])])]),_:1},8,["modelValue","options","locale"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),y("div",Zt,[el,v(X,{filled:"",dense:"",modelValue:e.formApertura.hora_inicio,"onUpdate:modelValue":i[6]||(i[6]=u=>e.formApertura.hora_inicio=u),mask:"time",rules:["time"]},{append:g(()=>[v(de,{name:"access_time",class:"cursor-pointer"},{default:g(()=>[v(Ee,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:g(()=>[v(la,{modelValue:e.formApertura.hora_inicio,"onUpdate:modelValue":i[5]||(i[5]=u=>e.formApertura.hora_inicio=u)},{default:g(()=>[y("div",al,[we(v(F,{label:"Close",color:"primary",flat:""},null,512),[[Ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),y("div",tl,[ll,v(X,{filled:"",dense:"",modelValue:e.formApertura.hora_fin,"onUpdate:modelValue":i[8]||(i[8]=u=>e.formApertura.hora_fin=u),mask:"time",rules:["time"]},{append:g(()=>[v(de,{name:"access_time",class:"cursor-pointer"},{default:g(()=>[v(Ee,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:g(()=>[v(la,{modelValue:e.formApertura.hora_fin,"onUpdate:modelValue":i[7]||(i[7]=u=>e.formApertura.hora_fin=u)},{default:g(()=>[y("div",ol,[we(v(F,{label:"Close",color:"primary",flat:""},null,512),[[Ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),y("div",nl,[rl,v(X,{modelValue:e.formApertura.observacion,"onUpdate:modelValue":i[9]||(i[9]=u=>e.formApertura.observacion=u),rows:"3",filled:"",type:"textarea"},null,8,["modelValue"])]),y("div",il,[v(F,{label:"Editar",class:"q-px-xl q-my-sm",loading:e.loading,type:"submit",color:"green-9"},null,8,["loading"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var sl=ya(Ut,[["render",ul]]);const dl=[{name:"id",label:"#",align:"left",field:"id",sortable:!0},{name:"periodo",label:"PERIODO",align:"center",field:"periodo",sortable:!0},{name:"descripcion",align:"center",label:"DESCRIPCI\xD3N",field:"descripcion"},{name:"lugar_votacion",align:"center",label:"LUGAR DE VOTACI\xD3N",field:"lugar_votacion"},{name:"fecha_inicio",label:"FECHA DE VOTACI\xD3N",field:"fecha_inicio_Edit",align:"center"},{name:"horas_votacion",label:"HORAS DE VOTACI\xD3N",field:"horas_votacion",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"},{name:"acciones",label:"acciones",align:"center"}],cl=_a({name:"IndexAperturas",components:{Add:Yt,Edit:sl},setup(){const{validarPermisos:e}=mt(),i=O(""),w=O([]),M=O(!0),{mostrarNotify:A}=ga(),Y=O(!1),u=O(!1),q=O({}),m=async()=>{Y.value=!1,u.value=!1,M.value=!0;try{const{data:{aperturas:D}}=await ke.get("/aperturas/all");D.map(x=>{let z=x.fecha_inicio.split("T")[0].split("-");x.fecha_inicio_Edit=`${z[2]}/${z[1]}/${z[0]}`,x.horas_votacion=`
            ${x.hora_inicio.split(":")[0]}:${x.hora_inicio.split(":")[1]}${x.hora_inicio.split(":")[0]<12?"am":"pm"}
              HASTA
            ${x.hora_fin.split(":")[0]}:${x.hora_fin.split(":")[1]}${x.hora_fin.split(":")[0]<12?"am":"pm"}`}),w.value=D}catch(D){alert(D)}M.value=!1};return m(),{editarApertura:D=>{D.hora_inicio=`${D.hora_inicio.split(":")[0]}:${D.hora_inicio.split(":")[1]}`,D.hora_fin=`${D.hora_fin.split(":")[0]}:${D.hora_fin.split(":")[1]}`,D.fecha_inicio=`${D.fecha_inicio.split("T")[0]}`,q.value=D,u.value=!0},eliminarApertura:async D=>{tt.create({title:"\xBFDeseas Eliminar a esta apertura?",message:"Una vez eliminado no podra recuperarse...!",ok:{push:!0,label:"Eliminar",color:"teal-7"},cancel:{push:!0,color:"blue-grey-8",label:"Cancelar"}}).onOk(async()=>{try{const{data:x}=await ke.delete(`/aperturas/${D}`);A("positive",x.msg),m()}catch(x){A("negative",x.response.data.message)}})},modalCrearApertura:Y,modalEditarApertura:u,activarDesactivarAperturas:async(D,x)=>{try{await ke.delete(`/aperturas/${D}/${x}`),A("positive",`Apertura ${x?"Activado":"Inactivado"} exitosamente`),m()}catch(z){alert(z)}},columns:dl,filter:i,loading:M,getAperturas:m,rows:w,aperturaData:q,validarPermisos:e}}}),vl={class:"row q-py-lg q-pl-md"},ml=y("div",{class:"col-md-6"},[y("label",{class:"text-h6"},"Registros de aperturas de proceso de elecciones")],-1),fl={class:"col-md-6 flex justify-end"},hl={class:"row"},_l={class:"col-md-12"},yl={class:"q-pa-md"},gl={class:"full-width row flex-center text-lime-10 q-gutter-sm"},pl=y("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1);function bl(e,i,w,M,A,Y){const u=wa("Add"),q=wa("Edit");return le(),ka(Aa,null,[v(nt,null,{default:g(()=>[y("div",vl,[ml,y("div",fl,[e.validarPermisos("Agregar Apertura")?(le(),se(F,{key:0,color:"secondary","icon-right":"person_add",label:"Agregar Apertura",class:"q-mr-md",onClick:i[0]||(i[0]=m=>e.modalCrearApertura=!e.modalCrearApertura)})):ea("",!0)])]),y("div",hl,[y("div",_l,[y("div",yl,[v(ot,{class:"my-sticky-header-table",rows:e.rows,columns:e.columns,loading:e.loading,filter:e.filter,"row-key":"name"},{top:g(()=>[v(lt),v(X,{dense:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":i[1]||(i[1]=m=>e.filter=m),label:"Buscar..."},{append:g(()=>[v(de,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-id":g(m=>[v(aa,{props:m},{default:g(()=>[Va(Ca(m.pageIndex+1),1)]),_:2},1032,["props"])]),"body-cell-pv":g(m=>[v(aa,{props:m},{default:g(()=>[Va(Ca(m.row.punto_venta),1)]),_:2},1032,["props"])]),"body-cell-estado":g(m=>[v(aa,{props:m},{default:g(()=>[m.value?(le(),se(qa,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(le(),se(qa,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":g(m=>[v(aa,{props:m},{default:g(()=>[e.validarPermisos("Editar Apertura")&&m.row.estado?(le(),se(F,{key:0,round:"",color:"primary",onClick:E=>e.editarApertura(m.row),icon:"edit",class:"q-mr-sm",size:"11px"},null,8,["onClick"])):ea("",!0),m.row.estado&&e.validarPermisos("Inactivar Apertura")?(le(),se(F,{key:1,round:"",color:"blue-grey",icon:"close",onClick:E=>e.activarDesactivarAperturas(m.row.id,!1),size:"11px"},null,8,["onClick"])):(le(),ka(Aa,{key:2},[!m.row.estado&&e.validarPermisos("Activar Apertura")?(le(),se(F,{key:0,round:"",color:"positive",class:"q-mr-sm",icon:"done",onClick:E=>e.activarDesactivarAperturas(m.row.id,!0),size:"11px"},null,8,["onClick"])):ea("",!0),!m.row.estado&&e.validarPermisos("Eliminar Apertura")?(le(),se(F,{key:1,round:"",color:"deep-orange",icon:"delete",onClick:E=>e.eliminarApertura(m.row.id),size:"11px"},null,8,["onClick"])):ea("",!0)],64))]),_:2},1032,["props"])]),"no-data":g(({icon:m,filter:E})=>[y("div",gl,[v(de,{size:"2em",name:"sentiment_dissatisfied"}),pl,v(de,{size:"2em",name:E?"filter_b_and_w":m},null,8,["name"])])]),_:1},8,["rows","columns","loading","filter"])])])])]),_:1}),v(ma,{modelValue:e.modalCrearApertura,"onUpdate:modelValue":i[2]||(i[2]=m=>e.modalCrearApertura=m)},{default:g(()=>[v(u,{onActualizarLista:e.getAperturas},null,8,["onActualizarLista"])]),_:1},8,["modelValue"]),v(ma,{modelValue:e.modalEditarApertura,"onUpdate:modelValue":i[3]||(i[3]=m=>e.modalEditarApertura=m)},{default:g(()=>[v(q,{aperturaData:e.aperturaData,onActualizarLista:e.getAperturas},null,8,["aperturaData","onActualizarLista"])]),_:1},8,["modelValue"])],64)}var Yl=ya(cl,[["render",bl]]);export{Yl as default};
