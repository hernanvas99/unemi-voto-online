import{d as k,r as p,A as R,_ as S,o as f,S as g,g as i,f as t,as as w,e as a,Q as E,h as $,at as j,W as T,c as P,au as z,av as M,aw as W,U as q,i as A,T as O,X as L}from"./index.2c7c5b43.js";import{Q as X}from"./QSpace.9c94e2bb.js";import{a as J,Q as C}from"./QTable.200aae8f.js";import{Q as B}from"./QBadge.d2a8fc0c.js";import{Q as K}from"./QPage.152e8f99.js";import{A as _}from"./Api.b16e05d9.js";import{Q as y}from"./QSelect.cd845e3e.js";import{Q as F}from"./QForm.8d724ed1.js";import{u as N}from"./useHelpers.e401e0ad.js";import{u as Y}from"./useRolPermisos.72458214.js";import"./QList.f8aa654c.js";import"./use-fullscreen.36e0f58f.js";import"./index.2cf0d985.js";import"./QItem.3a1f1059.js";import"./rtl.b51694b1.js";import"./auth-user.3faec0ee.js";const Z=k({name:"AgregarEstudiante",setup(e,{emit:l}){const r=p({especialidad_id:"",nombres:"",apellidos:"",email:"",cedula:"",celular:"",curso:"",paralelo:"",seccion:""}),u=p(!1),m=p([]),{mostrarNotify:v}=N(),s=async()=>{try{const{data:{especialidades:o}}=await _.get("/especialidades/activos");m.value=[],o.forEach(c=>{m.value.push({label:c.nombre,value:c.id})})}catch(o){alert(o)}},V=async()=>{try{u.value=!0;const{data:o}=await _.post("/estudiantes",r.value);l("actualizarLista"),v("positive",o.msg,"top-right"),u.value=!1}catch(o){u.value=!1,v("warning",o.response.data.errors[0].msg,"top-right")}};return R(r.value,(o,c)=>{r.value.nombres=o.nombres.toUpperCase(),r.value.apellidos=o.apellidos.toUpperCase()}),s(),{listEspecialidades:m,loading:u,formEstudiante:r,onSubmit:V,cursos:["1","2","3","4","5","6","7","8","9","10"],paralelos:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],secciones:["MATUTINO","VESPERTINO","NOCTURNO"]}}}),x=a("div",{class:"text-h6"},"Agregar Estudiante",-1),ee={class:"row q-gutter-sm justify-around"},le={class:"col-xs-12 col-sm-5"},ae=a("label",null,"Nombres:",-1),se={class:"col-xs-12 col-sm-5"},oe=a("label",null,"Apellidos:",-1),te={class:"col-xs-12 col-sm-5"},ie=a("label",null,"Email:",-1),de={class:"col-xs-12 col-sm-5 q-my-md"},ne=a("label",null,"Cedula:",-1),re={class:"col-xs-12 col-sm-5 q-my-md"},ue=a("label",null,"Celular:",-1),me={class:"col-xs-12 col-sm-5 q-my-md"},ce=a("label",null,"Cursos:",-1),pe={class:"col-xs-12 col-sm-5 q-my-md"},fe=a("label",null,"Paralelo:",-1),Ee={class:"col-xs-12 col-sm-5 q-my-md"},ve=a("label",null,"Especialidad:",-1),be={class:"col-xs-12 col-sm-5 q-my-md"},ge=a("label",null,"Secci\xF3n:",-1),Ve={class:"col-xs-9 col-sm-12 flex justify-center"};function ye(e,l,r,u,m,v){return f(),g(j,{style:{width:"600px","max-width":"80vw"}},{default:i(()=>[t(w,null,{default:i(()=>[x]),_:1}),t(w,null,{default:i(()=>[t(F,{onSubmit:e.onSubmit},{default:i(()=>[a("div",ee,[a("div",le,[ae,t(E,{modelValue:e.formEstudiante.nombres,"onUpdate:modelValue":l[0]||(l[0]=s=>e.formEstudiante.nombres=s),dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",se,[oe,t(E,{modelValue:e.formEstudiante.apellidos,"onUpdate:modelValue":l[1]||(l[1]=s=>e.formEstudiante.apellidos=s),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",te,[ie,t(E,{type:"email",modelValue:e.formEstudiante.email,"onUpdate:modelValue":l[2]||(l[2]=s=>e.formEstudiante.email=s),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",de,[ne,t(E,{modelValue:e.formEstudiante.cedula,"onUpdate:modelValue":l[3]||(l[3]=s=>e.formEstudiante.cedula=s),modelModifiers:{trim:!0},minlength:"10",maxlength:"10",type:"number",dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",re,[ue,t(E,{modelValue:e.formEstudiante.celular,"onUpdate:modelValue":l[4]||(l[4]=s=>e.formEstudiante.celular=s),modelModifiers:{trim:!0},type:"number",dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",me,[ce,t(y,{dense:"",filled:"",modelValue:e.formEstudiante.curso,"onUpdate:modelValue":l[5]||(l[5]=s=>e.formEstudiante.curso=s),options:e.cursos,required:""},null,8,["modelValue","options"])]),a("div",pe,[fe,t(y,{dense:"",filled:"",modelValue:e.formEstudiante.paralelo,"onUpdate:modelValue":l[6]||(l[6]=s=>e.formEstudiante.paralelo=s),options:e.paralelos,required:""},null,8,["modelValue","options"])]),a("div",Ee,[ve,t(y,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formEstudiante.especialidad_id,"onUpdate:modelValue":l[7]||(l[7]=s=>e.formEstudiante.especialidad_id=s),options:e.listEspecialidades},null,8,["modelValue","options"])]),a("div",be,[ge,t(y,{dense:"",filled:"",modelValue:e.formEstudiante.seccion,"onUpdate:modelValue":l[8]||(l[8]=s=>e.formEstudiante.seccion=s),options:e.secciones,required:""},null,8,["modelValue","options"])]),a("div",Ve,[t($,{label:"Guardar",class:"q-px-xl",loading:e.loading,type:"submit",color:"green-9"},null,8,["loading"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var $e=S(Z,[["render",ye]]);const _e=k({name:"EditarEstudiante",props:["estudianteData"],setup(e,{emit:l}){let{id:r,especialidad_id:u,nombres:m,apellidos:v,email:s,cedula:V,celular:o,curso:c,paralelo:Q,seccion:D}=e.estudianteData;const n=p({id:r,especialidad_id:u,nombres:m,apellidos:v,email:s,cedula:V,celular:o,curso:c,paralelo:Q,seccion:D}),d=p(!1),h=p([]),{mostrarNotify:I}=N(),G=async()=>{try{const{data:{especialidades:b}}=await _.get("/especialidades/activos");h.value=[],b.forEach(U=>{h.value.push({label:U.nombre,value:U.id})})}catch(b){alert(b)}},H=async()=>{try{d.value=!0;const{data:b}=await _.put("/estudiantes",n.value);l("actualizarLista"),I("positive",b.msg,"top-right"),d.value=!1}catch(b){d.value=!1,I("warning",b.response.data.errors[0].msg,"top-right")}};return R(n.value,(b,U)=>{n.value.nombres=b.nombres.toUpperCase(),n.value.apellidos=b.apellidos.toUpperCase()}),G(),{listEspecialidades:h,loading:d,formEstudiante:n,onSubmit:H,cursos:["1","2","3","4","5","6","7","8","9","10"],paralelos:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],secciones:["MATUTINO","VESPERTINO","NOCTURNO"]}}}),he=a("div",{class:"text-h6"},"Editar Estudiante",-1),qe={class:"row q-gutter-sm justify-around"},Ce={class:"col-xs-12 col-sm-5"},we=a("label",null,"Nombres:",-1),Ue={class:"col-xs-12 col-sm-5"},Ae=a("label",null,"Apellidos:",-1),ke={class:"col-xs-12 col-sm-5"},Se=a("label",null,"Email:",-1),Ne={class:"col-xs-12 col-sm-5 q-my-md"},Qe=a("label",null,"Cedula:",-1),De={class:"col-xs-12 col-sm-5 q-my-md"},Ie=a("label",null,"Celular:",-1),Te={class:"col-xs-12 col-sm-5 q-my-md"},Pe=a("label",null,"Cursos:",-1),ze={class:"col-xs-12 col-sm-5 q-my-md"},Me=a("label",null,"Paralelo:",-1),Oe={class:"col-xs-12 col-sm-5 q-my-md"},Le=a("label",null,"Especialidad:",-1),Be={class:"col-xs-12 col-sm-5 q-my-md"},Re=a("label",null,"Secci\xF3n:",-1),je={class:"col-xs-9 col-sm-12 flex justify-center"};function Fe(e,l,r,u,m,v){return f(),g(j,{style:{width:"600px","max-width":"80vw"}},{default:i(()=>[t(w,null,{default:i(()=>[he]),_:1}),t(w,null,{default:i(()=>[t(F,{onSubmit:e.onSubmit},{default:i(()=>[a("div",qe,[a("div",Ce,[we,t(E,{modelValue:e.formEstudiante.nombres,"onUpdate:modelValue":l[0]||(l[0]=s=>e.formEstudiante.nombres=s),dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",Ue,[Ae,t(E,{modelValue:e.formEstudiante.apellidos,"onUpdate:modelValue":l[1]||(l[1]=s=>e.formEstudiante.apellidos=s),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",ke,[Se,t(E,{type:"email",modelValue:e.formEstudiante.email,"onUpdate:modelValue":l[2]||(l[2]=s=>e.formEstudiante.email=s),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",Ne,[Qe,t(E,{modelValue:e.formEstudiante.cedula,"onUpdate:modelValue":l[3]||(l[3]=s=>e.formEstudiante.cedula=s),modelModifiers:{trim:!0},minlength:"10",maxlength:"10",type:"number",dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",De,[Ie,t(E,{modelValue:e.formEstudiante.celular,"onUpdate:modelValue":l[4]||(l[4]=s=>e.formEstudiante.celular=s),modelModifiers:{trim:!0},type:"number",dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",Te,[Pe,t(y,{dense:"",filled:"",modelValue:e.formEstudiante.curso,"onUpdate:modelValue":l[5]||(l[5]=s=>e.formEstudiante.curso=s),options:e.cursos,required:""},null,8,["modelValue","options"])]),a("div",ze,[Me,t(y,{dense:"",filled:"",modelValue:e.formEstudiante.paralelo,"onUpdate:modelValue":l[6]||(l[6]=s=>e.formEstudiante.paralelo=s),options:e.paralelos,required:""},null,8,["modelValue","options"])]),a("div",Oe,[Le,t(y,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formEstudiante.especialidad_id,"onUpdate:modelValue":l[7]||(l[7]=s=>e.formEstudiante.especialidad_id=s),options:e.listEspecialidades},null,8,["modelValue","options"])]),a("div",Be,[Re,t(y,{dense:"",filled:"",modelValue:e.formEstudiante.seccion,"onUpdate:modelValue":l[8]||(l[8]=s=>e.formEstudiante.seccion=s),options:e.secciones,required:""},null,8,["modelValue","options"])]),a("div",je,[t($,{label:"Editar",class:"q-px-xl",loading:e.loading,type:"submit",color:"primary"},null,8,["loading"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var Ge=S(_e,[["render",Fe]]);const He=[{name:"id",label:"#",align:"left",field:"id",sortable:!0},{name:"estudiante",label:"ESTUDIANTE",align:"center",field:"estudiante",sortable:!0},{name:"especialidad",align:"center",label:"ESPECIALIDAD",field:"especialidad"},{name:"matriculado",align:"center",label:"CURSO",field:"matriculado"},{name:"cedula",label:"CEDULA",field:"cedula",align:"center"},{name:"seccion",label:"SECCI\xD6N",field:"seccion",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"},{name:"acciones",label:"acciones",align:"center"}],We=k({name:"IndexEstudiante",components:{Add:$e,Edit:Ge},setup(){const{validarPermisos:e}=Y(),l=p(""),r=p([]),u=p(!0),{mostrarNotify:m}=N(),v=p(!1),s=p(!1),V=p({}),o=async()=>{v.value=!1,s.value=!1,u.value=!0;try{const{data:{estudiantes:n}}=await _.get("/estudiantes/all");n.map(d=>{d.estudiante=`${d.nombres} ${d.apellidos}`,d.matriculado=`${d.curso}${d.paralelo}`}),r.value=n}catch(n){alert(n)}u.value=!1};return o(),{editarEstudiante:n=>{V.value=n,s.value=!0},eliminarEstudiante:async n=>{W.create({title:"\xBFDeseas Eliminar a este estudiante?",message:"Una vez eliminado no podra recuperarse...!",ok:{push:!0,label:"Eliminar",color:"teal-7"},cancel:{push:!0,color:"blue-grey-8",label:"Cancelar"}}).onOk(async()=>{try{const{data:d}=await _.delete(`/estudiantes/${n}`);m("positive",d.msg),o()}catch(d){m("negative",d.response.data.message)}})},modalCrearEstudiante:v,modalEditarEstudiante:s,activarDesactivarEstudiante:async(n,d)=>{try{await _.delete(`/estudiantes/${n}/${d}`),m("positive",`Estudiante ${d?"Activado":"Inactivado"} exitosamente`),o()}catch(h){alert(h)}},columns:He,filter:l,loading:u,getEstudiantes:o,rows:r,estudianteData:V,validarPermisos:e}}}),Xe={class:"row q-py-lg q-pl-md"},Je=a("div",{class:"col-md-6"},[a("label",{class:"text-h6"},"Listado de Estudiantes Empadronados")],-1),Ke={class:"col-md-6 flex justify-end"},Ye={class:"row"},Ze={class:"col-md-12"},xe={class:"q-pa-md"},el={class:"full-width row flex-center text-lime-10 q-gutter-sm"},ll=a("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1);function al(e,l,r,u,m,v){const s=T("Add"),V=T("Edit");return f(),P(M,null,[t(K,null,{default:i(()=>[a("div",Xe,[Je,a("div",Ke,[e.validarPermisos("Agregar Estudiante")?(f(),g($,{key:0,color:"secondary","icon-right":"person_add",label:"Agregar Estudiante",class:"q-mr-md",onClick:l[0]||(l[0]=o=>e.modalCrearEstudiante=!e.modalCrearEstudiante)})):q("",!0)])]),a("div",Ye,[a("div",Ze,[a("div",xe,[t(J,{class:"my-sticky-header-table",rows:e.rows,columns:e.columns,loading:e.loading,filter:e.filter,"row-key":"name"},{top:i(()=>[t(X),t(E,{dense:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":l[1]||(l[1]=o=>e.filter=o),label:"Buscar Estudiante"},{append:i(()=>[t(A,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-id":i(o=>[t(C,{props:o},{default:i(()=>[O(L(o.pageIndex+1),1)]),_:2},1032,["props"])]),"body-cell-pv":i(o=>[t(C,{props:o},{default:i(()=>[O(L(o.row.punto_venta),1)]),_:2},1032,["props"])]),"body-cell-estado":i(o=>[t(C,{props:o},{default:i(()=>[o.value?(f(),g(B,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(f(),g(B,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":i(o=>[t(C,{props:o},{default:i(()=>[e.validarPermisos("Editar Estudiante")&&o.row.estado?(f(),g($,{key:0,round:"",color:"primary",onClick:c=>e.editarEstudiante(o.row),icon:"edit",class:"q-mr-sm",size:"11px"},null,8,["onClick"])):q("",!0),o.row.estado&&e.validarPermisos("Inactivar Estudiante")?(f(),g($,{key:1,round:"",color:"blue-grey",icon:"close",onClick:c=>e.activarDesactivarEstudiante(o.row.id,!1),size:"11px"},null,8,["onClick"])):(f(),P(M,{key:2},[!o.row.estado&&e.validarPermisos("Activar Estudiante")?(f(),g($,{key:0,round:"",color:"positive",class:"q-mr-sm",icon:"done",onClick:c=>e.activarDesactivarEstudiante(o.row.id,!0),size:"11px"},null,8,["onClick"])):q("",!0),!o.row.estado&&e.validarPermisos("Eliminar Estudiante")?(f(),g($,{key:1,round:"",color:"deep-orange",icon:"delete",onClick:c=>e.eliminarEstudiante(o.row.id),size:"11px"},null,8,["onClick"])):q("",!0)],64))]),_:2},1032,["props"])]),"no-data":i(({icon:o,filter:c})=>[a("div",el,[t(A,{size:"2em",name:"sentiment_dissatisfied"}),ll,t(A,{size:"2em",name:c?"filter_b_and_w":o},null,8,["name"])])]),_:1},8,["rows","columns","loading","filter"])])])])]),_:1}),t(z,{modelValue:e.modalCrearEstudiante,"onUpdate:modelValue":l[2]||(l[2]=o=>e.modalCrearEstudiante=o)},{default:i(()=>[t(s,{onActualizarLista:e.getEstudiantes},null,8,["onActualizarLista"])]),_:1},8,["modelValue"]),t(z,{modelValue:e.modalEditarEstudiante,"onUpdate:modelValue":l[3]||(l[3]=o=>e.modalEditarEstudiante=o)},{default:i(()=>[t(V,{estudianteData:e.estudianteData,onActualizarLista:e.getEstudiantes},null,8,["estudianteData","onActualizarLista"])]),_:1},8,["modelValue"])],64)}var Vl=S(We,[["render",al]]);export{Vl as default};
