import{d as ie,r as m,A as B,_ as ae,o as g,S as R,g as u,f as l,as as X,e as t,T as G,c as V,X as k,U as Q,av as K,be as ue,h as j,at as ce,bf as pe,bg as me,W as le,au as oe,aw as _e,Q as he,i as te,bh as ye}from"./index.86c036ad.js";import{Q as $}from"./QSelect.ff69d042.js";import{Q as be}from"./QSpace.3a2d759c.js";import{a as we,Q as W}from"./QTable.29ed5419.js";import{Q as de}from"./QBadge.265b8235.js";import{Q as $e}from"./QPage.4cf48411.js";import{A as q}from"./Api.0193aa3b.js";import{Q as M,c as Y}from"./QItem.faa27fdc.js";import{Q as ve}from"./QForm.dbcce163.js";import{u as se}from"./useHelpers.4fa72bec.js";import{u as Pe}from"./useRolPermisos.1ee2517c.js";import"./rtl.b51694b1.js";import"./QList.aebb5a08.js";import"./use-fullscreen.7000f2af.js";import"./index.2cf0d985.js";import"./auth-user.43655eae.js";let ne=[];const Ve=ie({name:"AgregarPresidente",props:["presidentes"],setup(e,{emit:i}){const P=m(""),E=m(""),f=m(""),h=m([]),a=m(!1),_=m({estudiante_id:"",estudiante:"",seccion:"",curso:"",especialidad:""}),s=m({lista_id:"",apertura_id:"",participaciones:"",imagePreview:"../../src/assets/default.jpg",foto:""}),w=m([]),L=m([]),z=m([]),T=m([]),D=m([]),y=m(!1),{mostrarNotify:c}=se(),b=async()=>{if(_.value.estudiante_id=="")return c("warning","Debes elegir un candidato","top-right");if(s.value.lista_id=="")return c("warning","Debes elegir una lista","top-right");if(f.value=="")return c("warning","Debes elegir una elecci\xF3n","top-right");if(s.value.participaciones=="")return c("warning","Debes seleccionar el campo participaciones","top-right");if(h.value.length==0)return c("warning","Debes elegir al menos un candidato a dignidades","top-right");let n=null;if(h.value.forEach((r,p)=>{r.dignidad_id==""&&(n=p)}),n!=null)return c("warning",`Debes asignar una dignidad al candidato ${n+1}`,"top-right");if(a.value)return c("warning","Error, no puede haber dignidades repetidos, por favor corregir!","top-right");try{let r=new FormData;r.append("presidente_id",_.value.estudiante_id),r.append("lista_id",s.value.lista_id),r.append("apertura_id",f.value),r.append("participaciones",s.value.participaciones),r.append("foto",s.value.foto),r.append("candidatos",JSON.stringify(h.value)),y.value=!0;const{data:p}=await q.post("/presidentes",r);i("actualizarLista"),c("positive",p.msg,"top-right"),y.value=!1}catch(r){y.value=!1,c("warning",r.response.data.errors[0].msg,"top-right")}},C=n=>{let r=n.target.files[0].type.split("/");if(r[1]=="jpg"||r[1]=="jpeg"||r[1]=="png"){var p,A=n.target.files;p=new FileReader,p.onload=S=>{s.value.imagePreview=S.target.result},s.value.foto=A[0],p.readAsDataURL(A[0])}},J=n=>{document.getElementById(n).click()},H=async()=>{try{const{data:{estudiantes:n}}=await q.get(`/estudiantes/candidatos_disponibles/${f.value}`);L.value=n,n.map(r=>{w.value.push({label:`${r.nombres} ${r.apellidos}`,value:r.id,cedula:r.cedula})}),ne=w.value}catch(n){alert(n)}},O=async()=>{try{const{data:{listas:n}}=await q.get(`/listas/listasByPeriodo/${T.value[0].value}`);z.value=[],n.forEach(r=>{var p=!1;e.presidentes.forEach(A=>{A.lista_id==r.id&&(p=!0)}),p||z.value.push({label:r.descripcion,value:r.id})})}catch(n){alert(n)}},x=async()=>{try{const{data:{aperturas:n}}=await q.get("/aperturas/activos");n.forEach(r=>{T.value.push({label:r.descripcion,value:r.id})}),O()}catch(n){alert(n)}},Z=async()=>{try{const{data:{dignidades:n}}=await q.get("/dignidades");n.forEach(r=>{D.value.push({label:r.nombre,value:r.id})})}catch(n){alert(n)}},ee=n=>{const r=h.value.findIndex(p=>p.candidato_id==n.candidato_id);h.value.splice(r,1)};return B(P,(n,r)=>{if(n!=""){const p=L.value.find(A=>A.id==n);_.value.estudiante=`${p.nombres} ${p.apellidos}`,_.value.seccion=p.seccion,_.value.curso=`${p.curso}${p.paralelo}`,_.value.especialidad=p.especialidad,_.value.estudiante_id=p.id}P.value=""}),B(h.value,(n,r)=>{h.value.forEach(p=>{const A=h.value.some(S=>S.dignidad_id!=""&&p.dignidad_id!=""&&S.candidato!=p.candidato&&S.dignidad_id==p.dignidad_id);a.value=A}),a.value&&c("warning","Error, no puede haber dignidades repetidos, por favor corregir!","top-right")}),B(f,(n,r)=>{H()}),B(E,(n,r)=>{if(n!=""){if(n==_.value.estudiante_id)return c("warning","Este Estudiante ya se encuentra como candidato para presidente","top-right"),E.value="";const p=L.value.find(S=>S.id==n);h.value.some(S=>S.candidato_id==p.id)||h.value.unshift({candidato_id:`${p.id}`,candidato:`${p.nombres} ${p.apellidos}`,dignidad_id:""})}E.value=""}),x(),Z(),{apertura_id:f,arrayDignidades:D,arrayListas:z,arrayAperturas:T,candidato:_,candidatos_id:E,eliminarFila:ee,listEstudiantes:w,listCandidatos:h,loading:y,formPresidente:s,presidente_id:P,onSubmit:b,openUpload:J,updatePreview:C,filterFn(n,r){if(n===""){r(()=>{w.value=ne});return}r(()=>{const p=n.toLowerCase();w.value=w.value.filter(A=>A.cedula.indexOf(p)>-1||A.label.toLowerCase().indexOf(p)>-1)})},options:["Primera Vez","Reelecci\xF3n"]}}}),I=e=>(pe("data-v-1d6e3fa5"),e=e(),me(),e),Ee=I(()=>t("div",{class:"text-h6 text-center"},"Agregar Presidente",-1)),qe={class:"row q-gutter-sm"},De={class:"col-xs-7 col-sm-7"},Ce={style:{width:"100%"},class:"q-mb-md"},Ae=I(()=>t("label",null,"Elecciones:",-1)),ke={style:{width:"100%"}},Ie=I(()=>t("label",null,"Buscar Candidato a Presidente:",-1)),Ue={key:0,style:{width:"100%","margin-top":"20px"}},xe={style:{width:"100%"}},Le=I(()=>t("legend",null,"Datos del Candidato:",-1)),Fe={class:"row q-mt-sm"},Se=I(()=>t("div",{class:"col-xs-5 col-sm-5 flex justify-end"},[t("label",{class:"text-subtitle1 text-weight-medium q-pr-xl"}," Estudiante: ")],-1)),Qe={class:"col-xs-6 col-sm-6 flex items-center"},Ne=I(()=>t("div",{class:"col-xs-5 col-sm-5 flex justify-end"},[t("label",{class:"text-subtitle1 text-weight-medium q-pr-xl"}," Especialidad: ")],-1)),Re={class:"col-xs-6 col-sm-6 flex items-center"},je=I(()=>t("div",{class:"col-xs-5 col-sm-5 flex justify-end"},[t("label",{class:"text-subtitle1 text-weight-medium q-pr-xl"}," Curso: ")],-1)),ze={class:"col-xs-6 col-sm-6 flex items-center"},Be=I(()=>t("div",{class:"col-xs-5 col-sm-5 flex justify-end"},[t("label",{class:"text-subtitle1 text-weight-medium q-pr-xl"}," Secci\xF3n: ")],-1)),Te={class:"col-xs-6 col-sm-6 flex items-center"},Oe={key:1,class:"q-mt-sm"},Ge={style:{width:"100%",display:"inline-flex"}},Je={class:"q-my-md",style:{width:"47%"}},He=I(()=>t("label",null,"Participaciones:",-1)),We={class:"q-my-md",style:{width:"49%","margin-left":"17px"}},Xe=I(()=>t("label",null,"Lista:",-1)),Ke={class:"col-xs-4 col-sm-4 q-ml-lg justify-center",style:{display:"flex"}},Me={style:{width:"100%"}},Ye=["src"],Ze={key:0,style:{width:"100%"},class:"q-mt-md"},et=I(()=>t("label",null,"Lista:",-1)),tt={key:0,class:"row q-gutter-sm"},it={class:"col-xs-12 col-sm-7 q-my-md"},at=I(()=>t("label",null,"Buscar Candidato a Dignidades:",-1)),st={class:"col-xs-12 col-sm-4 q-my-md q-ml-lg"},lt=I(()=>t("label",null,"Participaciones:",-1)),ot={key:1,class:"row q-gutter-sm"},dt={class:"col-xs-12 col-sm-11 q-my-md",id:"div1",style:{"margin-left":"33px"}},nt={style:{width:"100%"},class:"force-overflow"},rt=I(()=>t("thead",{class:"text-center"},[t("th",null,"#"),t("th",null,"CANDIDATO"),t("th",null,"DIGNIDAD"),t("th",null,"QUITAR")],-1)),ut={class:"text-center"},ct={style:{width:"7%"}},pt={style:{width:"48%"}},mt={style:{width:"32%"}},vt={style:{width:"13%"}},ft={class:"col-xs-9 col-sm-12 q-mt-md flex justify-center"};function gt(e,i,P,E,f,h){return g(),R(ce,{style:{width:"820px","max-width":"80vw"}},{default:u(()=>[l(X,{class:"q-pb-none"},{default:u(()=>[Ee]),_:1}),l(X,null,{default:u(()=>[l(ve,{onSubmit:e.onSubmit},{default:u(()=>[t("div",qe,[t("div",De,[t("div",Ce,[Ae,l($,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.apertura_id,"onUpdate:modelValue":i[0]||(i[0]=a=>e.apertura_id=a),options:e.arrayAperturas},null,8,["modelValue","options"])]),t("div",ke,[Ie,l($,{color:"orange",filled:"",modelValue:e.presidente_id,"onUpdate:modelValue":i[1]||(i[1]=a=>e.presidente_id=a),options:e.listEstudiantes,"emit-value":"","map-options":"",dense:"",onFilter:e.filterFn,"use-input":"","input-debounce":"0"},{"no-option":u(()=>[l(M,null,{default:u(()=>[l(Y,{class:"text-grey"},{default:u(()=>[G(" No hay resultados ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"])]),e.candidato.estudiante_id!=""?(g(),V("div",Ue,[t("fieldset",xe,[Le,t("div",Fe,[Se,t("div",Qe,[t("label",null,k(e.candidato.estudiante),1)]),Ne,t("div",Re,[t("label",null,k(e.candidato.especialidad),1)]),je,t("div",ze,[t("label",null,k(e.candidato.curso),1)]),Be,t("div",Te,[t("label",null,k(e.candidato.seccion),1)])])])])):(g(),V("div",Oe,[t("div",Ge,[t("div",Je,[He,l($,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formPresidente.participaciones,"onUpdate:modelValue":i[2]||(i[2]=a=>e.formPresidente.participaciones=a),options:e.options},null,8,["modelValue","options"])]),t("div",We,[Xe,l($,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formPresidente.lista_id,"onUpdate:modelValue":i[3]||(i[3]=a=>e.formPresidente.lista_id=a),options:e.arrayListas},null,8,["modelValue","options"])])])]))]),t("div",Ke,[t("div",Me,[t("img",{src:e.formPresidente.imagePreview,style:{height:"206px",width:"80%",cursor:"pointer","margin-left":"29px","margin-top":"9px"},onClick:i[4]||(i[4]=a=>e.openUpload("foto1"))},null,8,Ye),t("input",{type:"file",id:"foto1",name:"image_field",onChange:i[5]||(i[5]=(...a)=>e.updatePreview&&e.updatePreview(...a)),style:{display:"none"},accept:"image/*"},null,32),e.candidato.estudiante_id!=""?(g(),V("div",Ze,[et,l($,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formPresidente.lista_id,"onUpdate:modelValue":i[6]||(i[6]=a=>e.formPresidente.lista_id=a),options:e.arrayListas},null,8,["modelValue","options"])])):Q("",!0)])])]),e.candidato.estudiante_id!=""?(g(),V("div",tt,[t("div",it,[at,l($,{color:"orange",filled:"",modelValue:e.candidatos_id,"onUpdate:modelValue":i[7]||(i[7]=a=>e.candidatos_id=a),options:e.listEstudiantes,"emit-value":"","map-options":"",dense:"",onFilter:e.filterFn,"use-input":"","input-debounce":"0"},{"no-option":u(()=>[l(M,null,{default:u(()=>[l(Y,{class:"text-grey"},{default:u(()=>[G(" No hay resultados ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"])]),t("div",st,[lt,l($,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formPresidente.participaciones,"onUpdate:modelValue":i[8]||(i[8]=a=>e.formPresidente.participaciones=a),options:e.options},null,8,["modelValue","options"])])])):Q("",!0),e.listCandidatos.length!=0?(g(),V("div",ot,[t("div",dt,[t("table",nt,[rt,t("tbody",ut,[(g(!0),V(K,null,ue(e.listCandidatos,(a,_)=>(g(),V("tr",{key:_},[t("td",ct,k(_+1),1),t("td",pt,k(a.candidato),1),t("td",mt,[l($,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:a.dignidad_id,"onUpdate:modelValue":s=>a.dignidad_id=s,options:e.arrayDignidades},null,8,["modelValue","onUpdate:modelValue","options"])]),t("td",vt,[l(j,{round:"",color:"blue-grey",icon:"close",onClick:s=>e.eliminarFila(a),size:"sm"},null,8,["onClick"])])]))),128))])])])])):Q("",!0),t("div",ft,[l(j,{label:"Guardar",class:"q-px-xl",loading:e.loading,type:"submit",color:"green-9"},null,8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var _t=ae(Ve,[["render",gt],["__scopeId","data-v-1d6e3fa5"]]);let re=[];const ht=ie({name:"EditarPresidente",props:["presidenteData","presidentes"],setup(e,{emit:i}){const P=m(""),E=m(""),f=m([]),h=m(!1),{presidente_id:a,participaciones:_,lista_id:s,eleccion_id:w,ruta_foto:L,id_P:z}=e.presidenteData;let T="http://localhost:3000/api".slice(0,-4);const D=m({estudiante_id:"",estudiante:"",seccion:"",curso:"",especialidad:""}),y=m({lista_id:"",apertura_id:"",participaciones:_,imagePreview:`${T}/imgs/${L}`,image_old:L,foto:""}),c=m([]),b=m([]),C=m([]),J=m([]),H=m([]),O=m(!1),{mostrarNotify:x}=se(),Z=async()=>{if(D.value.estudiante_id=="")return x("warning","Debes elegir un candidato","top-right");if(y.value.lista_id=="")return x("warning","Debes elegir una lista","top-right");if(y.value.apertura_id=="")return x("warning","Debes elegir una elecci\xF3n","top-right");if(y.value.participaciones=="")return x("warning","Debes seleccionar el campo participaciones","top-right");if(f.value.length==0)return x("warning","Debes elegir al menos un candidato a dignidades","top-right");let d=null;if(f.value.forEach((o,v)=>{o.dignidad_id==""&&(d=v)}),d!=null)return x("warning",`Debes asignar una dignidad al candidato ${d+1}`,"top-right");if(h.value)return x("warning","Error, no puede haber dignidades repetidos, por favor corregir!","top-right");try{let o=new FormData;o.append("id_P",z),o.append("presidente_id",D.value.estudiante_id),o.append("lista_id",y.value.lista_id),o.append("apertura_id",y.value.apertura_id),o.append("participaciones",y.value.participaciones),o.append("foto",y.value.foto),o.append("foto_old",y.value.image_old),o.append("candidatos",JSON.stringify(f.value)),O.value=!0;const{data:v}=await q.put("/presidentes",o);i("actualizarLista"),x("positive",v.msg,"top-right"),O.value=!1}catch(o){O.value=!1,x("warning",o.response.data.errors[0].msg,"top-right")}},ee=d=>{let o=d.target.files[0].type.split("/");if(o[1]=="jpg"||o[1]=="jpeg"||o[1]=="png"){var v,F=d.target.files;v=new FileReader,v.onload=N=>{y.value.imagePreview=N.target.result},y.value.foto=F[0],v.readAsDataURL(F[0])}},n=d=>{document.getElementById(d).click()},r=async()=>{try{const{data:{estudiantes:d}}=await q.get("/estudiantes/activos");b.value=d,d.map(o=>{c.value.push({label:`${o.nombres} ${o.apellidos}`,value:o.id,cedula:o.cedula})}),re=c.value,P.value=a,ge()}catch(d){alert(d)}},p=async()=>{try{const{data:{listas:d}}=await q.get(`/listas/listasByPeriodo/${J.value[0].value}`);C.value=[],d.forEach(o=>{var v=!1;e.presidentes.forEach(F=>{F.lista_id==o.id&&(v=!0)}),v||C.value.push({label:o.descripcion,value:o.id}),s==o.id&&C.value.push({label:o.descripcion,value:o.id})}),y.value.lista_id=s}catch(d){alert(d)}},A=async()=>{try{const{data:{aperturas:d}}=await q.get("/aperturas/activos");d.forEach(o=>{J.value.push({label:o.descripcion,value:o.id})}),y.value.apertura_id=w,p()}catch(d){alert(d)}},S=async()=>{try{const{data:{dignidades:d}}=await q.get("/dignidades");d.forEach(o=>{H.value.push({label:o.nombre,value:o.id})})}catch(d){alert(d)}},fe=d=>{const o=f.value.findIndex(v=>v.candidato_id==d.candidato_id);f.value.splice(o,1)},ge=async()=>{try{const{data:{candidatos:d}}=await q.get(`/presidentes/candidatos/${z}`);console.log(d),d.forEach(o=>{f.value.unshift({candidato_id:`${o.estudiante_id}`,candidato:`${o.nombres} ${o.apellidos}`,dignidad_id:o.dignidad_id})})}catch(d){alert(d)}};return B(P,(d,o)=>{if(d!=""){const v=b.value.find(F=>F.id==d);D.value.estudiante=`${v.nombres} ${v.apellidos}`,D.value.seccion=v.seccion,D.value.curso=`${v.curso}${v.paralelo}`,D.value.especialidad=v.especialidad,D.value.estudiante_id=v.id}P.value=""}),B(f.value,(d,o)=>{f.value.forEach(v=>{const F=f.value.some(N=>N.dignidad_id!=""&&v.dignidad_id!=""&&N.candidato!=v.candidato&&N.dignidad_id==v.dignidad_id);h.value=F}),h.value&&x("warning","Error, no puede haber dignidades repetidos, por favor corregir!","top-right")}),B(E,(d,o)=>{if(d!=""){if(d==D.value.estudiante_id)return x("warning","Este Estudiante ya se encuentra como candidato para presidente","top-right"),E.value="";const v=b.value.find(N=>N.id==d);f.value.some(N=>N.candidato_id==v.id)||f.value.unshift({candidato_id:`${v.id}`,candidato:`${v.nombres} ${v.apellidos}`,dignidad_id:""})}E.value=""}),r(),A(),S(),{arrayDignidades:H,arrayListas:C,arrayAperturas:J,candidato:D,candidatos_id:E,eliminarFila:fe,listEstudiantes:c,listCandidatos:f,loading:O,formPresidente:y,presidente_id:P,onSubmit:Z,openUpload:n,updatePreview:ee,filterFn(d,o){if(d===""){o(()=>{c.value=re});return}o(()=>{const v=d.toLowerCase();c.value=c.value.filter(F=>F.cedula.indexOf(v)>-1||F.label.toLowerCase().indexOf(v)>-1)})},options:["Primera Vez","Reelecci\xF3n"]}}}),U=e=>(pe("data-v-b500269a"),e=e(),me(),e),yt=U(()=>t("div",{class:"text-h6 text-center"},"Editar Presidente",-1)),bt={class:"row q-gutter-sm"},wt={class:"col-xs-7 col-sm-7"},$t={style:{width:"100%"}},Pt=U(()=>t("label",null,"Buscar Candidato a Presidente:",-1)),Vt={key:0,style:{width:"100%","margin-top":"20px"}},Et={style:{width:"100%"}},qt=U(()=>t("legend",null,"Datos del Candidato:",-1)),Dt={class:"row q-mt-sm"},Ct=U(()=>t("div",{class:"col-xs-5 col-sm-5 flex justify-end"},[t("label",{class:"text-subtitle1 text-weight-medium q-pr-xl"}," Estudiante: ")],-1)),At={class:"col-xs-6 col-sm-6 flex items-center"},kt=U(()=>t("div",{class:"col-xs-5 col-sm-5 flex justify-end"},[t("label",{class:"text-subtitle1 text-weight-medium q-pr-xl"}," Especialidad: ")],-1)),It={class:"col-xs-6 col-sm-6 flex items-center"},Ut=U(()=>t("div",{class:"col-xs-5 col-sm-5 flex justify-end"},[t("label",{class:"text-subtitle1 text-weight-medium q-pr-xl"}," Curso: ")],-1)),xt={class:"col-xs-6 col-sm-6 flex items-center"},Lt=U(()=>t("div",{class:"col-xs-5 col-sm-5 flex justify-end"},[t("label",{class:"text-subtitle1 text-weight-medium q-pr-xl"}," Secci\xF3n: ")],-1)),Ft={class:"col-xs-6 col-sm-6 flex items-center"},St={key:1,class:"q-mt-lg"},Qt={style:{width:"100%",display:"inline-flex"}},Nt={class:"q-my-md",style:{width:"47%"}},Rt=U(()=>t("label",null,"Participaciones:",-1)),jt={class:"q-my-md",style:{width:"49%","margin-left":"17px"}},zt=U(()=>t("label",null,"Lista:",-1)),Bt={class:"col-xs-4 col-sm-4 q-ml-lg justify-center",style:{display:"flex"}},Tt={style:{width:"100%"}},Ot=["src"],Gt={key:0,class:"row q-gutter-sm q-mt-sm"},Jt={class:"col-xs-12 col-sm-3 q-my-md"},Ht=U(()=>t("label",null,"Participaciones:",-1)),Wt={class:"col-xs-12 col-sm-4 q-my-md p"},Xt=U(()=>t("label",null,"Lista:",-1)),Kt={class:"col-xs-12 col-sm-4 q-my-md"},Mt=U(()=>t("label",null,"Elecciones:",-1)),Yt={key:1,class:"row q-gutter-sm"},Zt={class:"col-xs-12 col-sm-7 q-my-md"},ei=U(()=>t("label",null,"Buscar Candidato a Dignidades:",-1)),ti={key:2,class:"row q-gutter-sm"},ii={class:"col-xs-12 col-sm-11 q-my-md",id:"div1",style:{"margin-left":"33px"}},ai={style:{width:"100%"},class:"force-overflow"},si=U(()=>t("thead",{class:"text-center"},[t("th",null,"#"),t("th",null,"CANDIDATO"),t("th",null,"DIGNIDAD"),t("th",null,"QUITAR")],-1)),li={class:"text-center"},oi={style:{width:"7%"}},di={style:{width:"48%"}},ni={style:{width:"32%"}},ri={style:{width:"13%"}},ui={class:"col-xs-9 col-sm-12 q-mt-md flex justify-center"};function ci(e,i,P,E,f,h){return g(),R(ce,{style:{width:"820px","max-width":"80vw"}},{default:u(()=>[l(X,{class:"q-pb-none"},{default:u(()=>[yt]),_:1}),l(X,null,{default:u(()=>[l(ve,{onSubmit:e.onSubmit},{default:u(()=>[t("div",bt,[t("div",wt,[t("div",$t,[Pt,l($,{color:"orange",filled:"",modelValue:e.presidente_id,"onUpdate:modelValue":i[0]||(i[0]=a=>e.presidente_id=a),options:e.listEstudiantes,"emit-value":"","map-options":"",dense:"",onFilter:e.filterFn,"use-input":"","input-debounce":"0"},{"no-option":u(()=>[l(M,null,{default:u(()=>[l(Y,{class:"text-grey"},{default:u(()=>[G(" No hay resultados ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"])]),e.candidato.estudiante_id!=""?(g(),V("div",Vt,[t("fieldset",Et,[qt,t("div",Dt,[Ct,t("div",At,[t("label",null,k(e.candidato.estudiante),1)]),kt,t("div",It,[t("label",null,k(e.candidato.especialidad),1)]),Ut,t("div",xt,[t("label",null,k(e.candidato.curso),1)]),Lt,t("div",Ft,[t("label",null,k(e.candidato.seccion),1)])])])])):(g(),V("div",St,[t("div",Qt,[t("div",Nt,[Rt,l($,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formPresidente.participaciones,"onUpdate:modelValue":i[1]||(i[1]=a=>e.formPresidente.participaciones=a),options:e.options},null,8,["modelValue","options"])]),t("div",jt,[zt,l($,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formPresidente.lista_id,"onUpdate:modelValue":i[2]||(i[2]=a=>e.formPresidente.lista_id=a),options:e.arrayListas},null,8,["modelValue","options"])])])]))]),t("div",Bt,[t("div",Tt,[t("img",{src:e.formPresidente.imagePreview,style:{height:"206px",width:"80%",cursor:"pointer","margin-left":"29px","margin-top":"9px"},onClick:i[3]||(i[3]=a=>e.openUpload("foto1"))},null,8,Ot),t("input",{type:"file",id:"foto1",name:"image_field",onChange:i[4]||(i[4]=(...a)=>e.updatePreview&&e.updatePreview(...a)),style:{display:"none"},accept:"image/*"},null,32)])])]),e.candidato.estudiante_id!=""?(g(),V("div",Gt,[t("div",Jt,[Ht,l($,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formPresidente.participaciones,"onUpdate:modelValue":i[5]||(i[5]=a=>e.formPresidente.participaciones=a),options:e.options},null,8,["modelValue","options"])]),t("div",Wt,[Xt,l($,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formPresidente.lista_id,"onUpdate:modelValue":i[6]||(i[6]=a=>e.formPresidente.lista_id=a),options:e.arrayListas},null,8,["modelValue","options"])]),t("div",Kt,[Mt,l($,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formPresidente.apertura_id,"onUpdate:modelValue":i[7]||(i[7]=a=>e.formPresidente.apertura_id=a),options:e.arrayAperturas},null,8,["modelValue","options"])])])):Q("",!0),e.candidato.estudiante_id!=""?(g(),V("div",Yt,[t("div",Zt,[ei,l($,{color:"orange",filled:"",modelValue:e.candidatos_id,"onUpdate:modelValue":i[8]||(i[8]=a=>e.candidatos_id=a),options:e.listEstudiantes,"emit-value":"","map-options":"",dense:"",onFilter:e.filterFn,"use-input":"","input-debounce":"0"},{"no-option":u(()=>[l(M,null,{default:u(()=>[l(Y,{class:"text-grey"},{default:u(()=>[G(" No hay resultados ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"])])])):Q("",!0),e.listCandidatos.length!=0?(g(),V("div",ti,[t("div",ii,[t("table",ai,[si,t("tbody",li,[(g(!0),V(K,null,ue(e.listCandidatos,(a,_)=>(g(),V("tr",{key:_},[t("td",oi,k(_+1),1),t("td",di,k(a.candidato),1),t("td",ni,[l($,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:a.dignidad_id,"onUpdate:modelValue":s=>a.dignidad_id=s,options:e.arrayDignidades},null,8,["modelValue","onUpdate:modelValue","options"])]),t("td",ri,[l(j,{round:"",color:"blue-grey",icon:"close",onClick:s=>e.eliminarFila(a),size:"sm"},null,8,["onClick"])])]))),128))])])])])):Q("",!0),t("div",ui,[l(j,{label:"Editar",class:"q-px-xl",loading:e.loading,type:"submit",color:"green-9"},null,8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var pi=ae(ht,[["render",ci],["__scopeId","data-v-b500269a"]]);const mi=[{name:"id",label:"#",align:"left",field:"id",sortable:!0},{name:"presidente",label:"PRESIDENTES",align:"left",field:"presidente",sortable:!0},{name:"cedula",label:"CEDULA",field:"cedula",align:"center"},{name:"lista",label:"LISTA",field:"lista",align:"center"},{name:"elecciones",label:"ELECCIONES",field:"elecciones",align:"center"},{name:"participaciones",label:"PARTICIPACIONES",field:"participaciones",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"},{name:"acciones",label:"acciones",align:"center"}],vi=ie({name:"IndexPresidente",components:{Add:_t,Edit:pi},setup(){const{validarPermisos:e}=Pe(),i=m(""),P=m(""),E=m([]),f=m(!0),{mostrarNotify:h}=se(),a=m(!1),_=m(!1),s=m({}),w=m([]),L=async()=>{a.value=!1,_.value=!1,f.value=!0;try{const{data:{presidentes:c}}=await q.get(`/presidentes/all?apertura_id=${P.value}`);let b="http://localhost:3000/api".slice(0,-4);c.map(C=>{C.presidente=`${C.nombres} ${C.apellidos}`,C.img=`${b}/imgs/${C.ruta_foto}`}),E.value=c}catch(c){alert(c)}f.value=!1},z=async(c,b)=>{try{await q.delete(`/presidentes/${c}/${b}`),h("positive",`Presidente ${b?"Activado":"Inactivado"} exitosamente`),L()}catch(C){alert(C)}},T=async c=>{_e.create({title:"\xBFDeseas Eliminar a este candidato a presidente?",message:"Una vez eliminado no podra recuperarse...!",ok:{push:!0,label:"Eliminar",color:"teal-7"},cancel:{push:!0,color:"blue-grey-8",label:"Cancelar"}}).onOk(async()=>{try{const{data:b}=await q.delete(`/presidentes/${c}`);h("positive",b.msg),L()}catch(b){h("negative",b.response.data.message)}})},D=c=>{s.value=c,_.value=!0},y=async()=>{try{const{data:{aperturas:c}}=await q.get("/aperturas/all");c.forEach(b=>{b.estado&&(P.value=b.id),w.value.push({label:b.descripcion,value:b.id})}),L()}catch(c){alert(c)}};return B(P,(c,b)=>{L()}),y(),{apertura_id:P,arrayAperturas:w,editarPresidente:D,eliminarPresidente:T,modalAgregarPresidente:a,modalEditarPresidente:_,activarDesactivarPresidente:z,columns:mi,filter:i,loading:f,getPresidentes:L,rows:E,presidenteData:s,validarPermisos:e}}}),fi={class:"row q-py-lg q-pl-md"},gi=t("div",{class:"col-md-6"},[t("label",{class:"text-h6"},"Registros de presidentes registrados")],-1),_i={class:"col-md-6 flex justify-end"},hi={class:"row"},yi={class:"col-md-12 col-xs-12"},bi={class:"q-pa-md"},wi=t("label",{class:"text-h6 text-weight-regular"},"Filtrar por elecciones:",-1),$i={style:{width:"20%"},class:"q-ml-lg"},Pi=["src"],Vi={class:"full-width row flex-center text-lime-10 q-gutter-sm"},Ei=t("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1);function qi(e,i,P,E,f,h){const a=le("Add"),_=le("Edit");return g(),V(K,null,[l($e,null,{default:u(()=>[t("div",fi,[gi,t("div",_i,[e.validarPermisos("Agregar Presidente")?(g(),R(j,{key:0,color:"secondary","icon-right":"person_add",label:"Agregar Candidato a Presidente",class:"q-mr-md",onClick:i[0]||(i[0]=s=>e.modalAgregarPresidente=!e.modalAgregarPresidente)})):Q("",!0)])]),t("div",hi,[t("div",yi,[t("div",bi,[l(we,{class:"my-sticky-header-table",rows:e.rows,columns:e.columns,loading:e.loading,filter:e.filter,"row-key":"name"},{top:u(()=>[wi,t("div",$i,[l($,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.apertura_id,"onUpdate:modelValue":i[1]||(i[1]=s=>e.apertura_id=s),options:e.arrayAperturas},null,8,["modelValue","options"])]),l(be),l(he,{dense:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":i[2]||(i[2]=s=>e.filter=s),label:"Buscar Presidente"},{append:u(()=>[l(te,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-id":u(s=>[l(W,{props:s},{default:u(()=>[G(k(s.pageIndex+1),1)]),_:2},1032,["props"])]),"body-cell-presidente":u(s=>[l(W,{props:s},{default:u(()=>[l(ye,{class:"q-mr-sm"},{default:u(()=>[t("img",{src:s.row.img},null,8,Pi)]),_:2},1024),G(" "+k(s.row.presidente),1)]),_:2},1032,["props"])]),"body-cell-estado":u(s=>[l(W,{props:s},{default:u(()=>[s.value?(g(),R(de,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(g(),R(de,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":u(s=>[l(W,{props:s},{default:u(()=>[e.validarPermisos("Editar Presidente")&&s.row.estado?(g(),R(j,{key:0,round:"",color:"primary",onClick:w=>e.editarPresidente(s.row),icon:"edit",class:"q-mr-sm",size:"11px"},null,8,["onClick"])):Q("",!0),s.row.estado&&e.validarPermisos("Inactivar Presidente")?(g(),R(j,{key:1,round:"",color:"blue-grey",icon:"close",onClick:w=>e.activarDesactivarPresidente(s.row.id_P,!1),size:"11px"},null,8,["onClick"])):(g(),V(K,{key:2},[!s.row.estado&&e.validarPermisos("Activar Presidente")?(g(),R(j,{key:0,round:"",color:"positive",class:"q-mr-sm",icon:"done",onClick:w=>e.activarDesactivarPresidente(s.row.id_P,!0),size:"11px"},null,8,["onClick"])):Q("",!0),!s.row.estado&&e.validarPermisos("Eliminar Presidente")?(g(),R(j,{key:1,round:"",color:"deep-orange",icon:"delete",onClick:w=>e.eliminarPresidente(s.row.id_P),size:"11px"},null,8,["onClick"])):Q("",!0)],64))]),_:2},1032,["props"])]),"no-data":u(({icon:s,filter:w})=>[t("div",Vi,[l(te,{size:"2em",name:"sentiment_dissatisfied"}),Ei,l(te,{size:"2em",name:w?"filter_b_and_w":s},null,8,["name"])])]),_:1},8,["rows","columns","loading","filter"])])])])]),_:1}),l(oe,{modelValue:e.modalAgregarPresidente,"onUpdate:modelValue":i[3]||(i[3]=s=>e.modalAgregarPresidente=s)},{default:u(()=>[l(a,{onActualizarLista:e.getPresidentes,presidentes:e.rows},null,8,["onActualizarLista","presidentes"])]),_:1},8,["modelValue"]),l(oe,{modelValue:e.modalEditarPresidente,"onUpdate:modelValue":i[4]||(i[4]=s=>e.modalEditarPresidente=s)},{default:u(()=>[l(_,{presidenteData:e.presidenteData,onActualizarLista:e.getPresidentes,presidentes:e.rows},null,8,["presidenteData","onActualizarLista","presidentes"])]),_:1},8,["modelValue"])],64)}var Ti=ae(vi,[["render",qi]]);export{Ti as default};
